<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>RSS Feed</title>

  <link rel="stylesheet" href="https://ldom.net/assets/css/simplicity.css">
  <link rel="alternate" type="application/rss+xml" title="Ldom.net" href="https://ldom.net/feed.xml">
  <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
  <link type="text/plain" rel="author" href="https://ldom.net/humans.txt">

  <!-- Search Engine Optimization -->
<meta name="description" content="Ldom.net â€“ 
    
    https://ldom.net/
    
    Tue, 09 Jun 2020 21:45:01 +0000
    Tue, 09 Jun 2020 21:45:01 +0000
    Jekyll v4.1.0
    
      
        Create Multi-Region Topics Programmatically With Python and confluent-kafka-python
        &amp;lt;p&amp;gt;Confluent Platform 5.4 introduced Multi-Region Clusters (MRC). MRC adds numerous cool features such as Follower-Fetching or asynchronous Observers.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;This article explains how to create topics with replicas and observers programmatically using python.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;More details on MRC clusters: &amp;lt;a href=&amp;quot;https://docs.confluent.io/current/multi-dc-deployments/multi-region.html&amp;quot;&amp;gt;https://docs.confluent.io/current/multi-dc-deployments/multi-region.html&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;!--more--&amp;gt;

&amp;lt;p&amp;gt;To create a topic with replicas and (asynchronous) observers, you have to pass replica and observers placement details in the form of a JSON object.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Here is an example using the command-line:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;cat &amp;lt;/span&amp;gt;placement.json
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;version&amp;quot;&amp;lt;/span&amp;gt;:1,&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;replicas&amp;quot;&amp;lt;/span&amp;gt;:[&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;count&amp;quot;&amp;lt;/span&amp;gt;:2,&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;constraints&amp;quot;&amp;lt;/span&amp;gt;:&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;rack&amp;quot;&amp;lt;/span&amp;gt;:&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;east&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;}}]&amp;lt;/span&amp;gt;,&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;observers&amp;quot;&amp;lt;/span&amp;gt;:[&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;count&amp;quot;&amp;lt;/span&amp;gt;:1,&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;constraints&amp;quot;&amp;lt;/span&amp;gt;:&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;rack&amp;quot;&amp;lt;/span&amp;gt;:&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;west&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;}}]}&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;err&amp;quot;&amp;gt;$&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;kafka-topics  &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--create&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--bootstrap-server&amp;lt;/span&amp;gt; &amp;amp;lt;IP address&amp;amp;gt;:9092 &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--topic&amp;lt;/span&amp;gt; test2 &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--partitions&amp;lt;/span&amp;gt; 5 &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--replica-placement&amp;lt;/span&amp;gt; placement.json
&amp;lt;span class=&amp;quot;err&amp;quot;&amp;gt;$&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;kafka-topics &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--zookeeper&amp;lt;/span&amp;gt; &amp;amp;lt;IP address&amp;amp;gt;:2181 &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--describe&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--topic&amp;lt;/span&amp;gt; test2

Topic: test2	PartitionCount: 5	ReplicationFactor: 3	Configs: confluent.placement.constraints&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;={&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;version&amp;quot;&amp;lt;/span&amp;gt;:1,&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;replicas&amp;quot;&amp;lt;/span&amp;gt;:[&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;count&amp;quot;&amp;lt;/span&amp;gt;:2,&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;constraints&amp;quot;&amp;lt;/span&amp;gt;:&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;rack&amp;quot;&amp;lt;/span&amp;gt;:&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;east&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;}}]&amp;lt;/span&amp;gt;,&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;observers&amp;quot;&amp;lt;/span&amp;gt;:[&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;count&amp;quot;&amp;lt;/span&amp;gt;:1,&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;constraints&amp;quot;&amp;lt;/span&amp;gt;:&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;rack&amp;quot;&amp;lt;/span&amp;gt;:&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;west&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;}}]}&amp;lt;/span&amp;gt;
	Topic: test2	Partition: 0	Leader: 2	Replicas: 2,3,4	Isr: 2,3	Offline:
	Topic: test2	Partition: 1	Leader: 3	Replicas: 3,1,5	Isr: 3,1	Offline:
	Topic: test2	Partition: 2	Leader: 1	Replicas: 1,2,4	Isr: 1,2	Offline:
	Topic: test2	Partition: 3	Leader: 2	Replicas: 2,1,5	Isr: 2,1	Offline:
	Topic: test2	Partition: 4	Leader: 3	Replicas: 3,2,4	Isr: 3,2	Offline:&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;To do the same programmatically with python, you have to use the &amp;lt;a href=&amp;quot;https://docs.confluent.io/current/clients/confluent-kafka-python/&amp;quot;&amp;gt;confluent-kafka-python&amp;lt;/a&amp;gt; python library.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Specific to MRC is that you have to pass a config dict with &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;confluent.placement.constraints&amp;lt;/code&amp;gt; instead of the &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;replication_factor&amp;lt;/code&amp;gt; argument. See line 5 below.&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-python&amp;quot; data-lang=&amp;quot;python&amp;quot;&amp;gt;&amp;lt;table class=&amp;quot;rouge-table&amp;quot;&amp;gt;&amp;lt;tbody&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;td class=&amp;quot;gutter gl&amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;lineno&amp;quot;&amp;gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td class=&amp;quot;code&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;span class=&amp;quot;kn&amp;quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nn&amp;quot;&amp;gt;confluent_kafka.admin&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;kn&amp;quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;AdminClient&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;NewTopic&amp;lt;/span&amp;gt;

&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;placement&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;&amp;quot;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;version&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:1,&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;replicas&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:[{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;count&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:2,&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;constraints&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;rack&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;east&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;}}],&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;observers&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:[{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;count&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:1,&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;constraints&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;rack&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;west&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;}}]}&amp;quot;&amp;lt;/span&amp;gt;

&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;new_topic&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;NewTopic&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;&amp;quot;test1&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;num_partitions&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;mi&amp;quot;&amp;gt;5&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;config&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;&#39;confluent.placement.constraints&#39;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;placement&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;})]&amp;lt;/span&amp;gt;

&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;a&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;AdminClient&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;({&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;&#39;bootstrap.servers&#39;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;&#39;&amp;amp;lt;IP address&amp;amp;gt;:9092&#39;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;})&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;res&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;a&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;create_topics&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;new_topic&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;

&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;for&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;topic&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;f&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;ow&amp;quot;&amp;gt;in&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;res&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;():&amp;lt;/span&amp;gt;
    &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;try&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;
        &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;f&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;result&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;()&amp;lt;/span&amp;gt;
        &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;print&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;&amp;quot;Topic {} created&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;format&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;topic&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;))&amp;lt;/span&amp;gt;
    &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;except&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;Exception&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;as&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;e&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;
        &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;print&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;&amp;quot;Failed to create topic {}: {}&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;format&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;topic&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;e&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;))&amp;lt;/span&amp;gt;
&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&amp;lt;/tbody&amp;gt;&amp;lt;/table&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;Thatâ€™s it!&amp;lt;/p&amp;gt;

        Mon, 18 May 2020 00:00:00 +0000
        https://ldom.net/create-mrc-topics-programmatically-with-python/
        https://ldom.net/create-mrc-topics-programmatically-with-python/
        
        
      
    
      
        Switch Between Apache Kafka and Confluent Versions with Homebrew
        &amp;lt;p&amp;gt;Once youâ€™ve installed Apache Kafka and the Confluent Platform using &amp;lt;a href=&amp;quot;https://brew.sh&amp;quot;&amp;gt;Homebrew&amp;lt;/a&amp;gt;, there are many ways to maintain multiple versions of the package on your local computer.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;(This is kinda part 2 of &amp;lt;a href=&amp;quot;/homebrew-confluent-platform/&amp;quot;&amp;gt;Install and Configure Apache Kafka and the Confluent Platform using Homebrew&amp;lt;/a&amp;gt;.)&amp;lt;/p&amp;gt;

&amp;lt;!--more--&amp;gt;

&amp;lt;p&amp;gt;To switch from a version to another with Homebrew (here: 5.3.1), simply do:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;brew switch confluent-platform 5.3.1&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;This is great but it relies on the fact that the version you want to switch to is currently installed locally in your cellar. If itâ€™s the case, Homebrew does the switch instantly by updating symlinks.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;There are several ways to ensure that you have all the versions that you want in your local computer. At some point, they will collide with the fact that Homebrew does a cleanup every 30 days or each time you run an upgrade, unless you the &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;HOMEBREW_NO_INSTALL_CLEANUP&amp;lt;/code&amp;gt; envvar.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;You can:&amp;lt;/p&amp;gt;

&amp;lt;ol&amp;gt;
  &amp;lt;li&amp;gt;
    &amp;lt;p&amp;gt;Use &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;HOMEBREW_NO_INSTALL_CLEANUP&amp;lt;/code&amp;gt; when upgrading all Homebrew packages to keep the previous versions on your disk. Unless it is set, &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;brew cleanup&amp;lt;/code&amp;gt; will be run for the formula that youâ€™re upgrading or, every 30 days, for all formulae. It will fill your disk quite quickly if you use a lot of packages and unless youâ€™re super careful, youâ€™ll loose your previous versions sooner or later.&amp;lt;/p&amp;gt;
  &amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;
    &amp;lt;p&amp;gt;Build you own keg and feed it with the versions that you want to keep using &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;brew extract&amp;lt;/code&amp;gt;. Too much work IMHO.&amp;lt;/p&amp;gt;
  &amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;
    &amp;lt;p&amp;gt;Use &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;HOMEBREW_NO_INSTALL_CLEANUP&amp;lt;/code&amp;gt; when upgrading &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;confluent-platform&amp;lt;/code&amp;gt;. If the version you want is gone, restore it using &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;brew install&amp;lt;/code&amp;gt; referencing the &amp;lt;b&amp;gt;specific commit number&amp;lt;/b&amp;gt;. (Also remember to backup the Confluent/Kafka config files in a folder outside of Homebrew.)&amp;lt;/p&amp;gt;
  &amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;

&amp;lt;p&amp;gt;In this article, Iâ€™m describing Option 3.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Reference points:&amp;lt;/p&amp;gt;

&amp;lt;ul&amp;gt;
  &amp;lt;li&amp;gt;&amp;lt;a href=&amp;quot;https://formulae.brew.sh/formula/confluent-platform&amp;quot;&amp;gt;https://formulae.brew.sh/formula/confluent-platform&amp;lt;/a&amp;gt; â€“&amp;amp;gt; page for the formula in Homebrew&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;&amp;lt;a href=&amp;quot;https://github.com/Homebrew/homebrew-core/blob/master/Formula/confluent-platform.rb&amp;quot;&amp;gt;https://github.com/Homebrew/homebrew-core/blob/master/Formula/confluent-platform.rb&amp;lt;/a&amp;gt; â€“&amp;amp;gt; location of the formula for the Confluent Platform in the repo&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;&amp;lt;a href=&amp;quot;https://github.com/Homebrew/homebrew-core/commits/master/Formula/confluent-platform.rb&amp;quot;&amp;gt;https://github.com/Homebrew/homebrew-core/commits/master/Formula/confluent-platform.rb&amp;lt;/a&amp;gt; â€“&amp;amp;gt; commit history of the formula&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

&amp;lt;h1 id=&amp;quot;first-install&amp;quot;&amp;gt;First Install&amp;lt;/h1&amp;gt;

&amp;lt;p&amp;gt;To install for the first time, run:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;brew &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;install &amp;lt;/span&amp;gt;confluent-platform&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;h1 id=&amp;quot;upgrades&amp;quot;&amp;gt;Upgrades&amp;lt;/h1&amp;gt;

&amp;lt;p&amp;gt;To upgrade without removing the previous versions, run:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;~ &amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ HOMEBREW_NO_INSTALL_CLEANUP&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt;1 brew upgrade confluent-platform
Updating Homebrew...
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; Auto-updated Homebrew!
Updated 1 tap &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;homebrew/core&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; Updated Formulae
.../...

&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; Upgrading 1 outdated package:
confluent-platform 5.3.1 -&amp;amp;gt; 5.4.0
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; Upgrading confluent-platform
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; Downloading https://packages.confluent.io/archive/5.4/confluent-5.4.0-2.12.tar.gz
&amp;lt;span class=&amp;quot;c&amp;quot;&amp;gt;######################################################################## 100.0%&amp;lt;/span&amp;gt;
ðŸº  /usr/local/Cellar/confluent-platform/5.4.0: 2,943 files, 951.4MB, built &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;in &amp;lt;/span&amp;gt;85 minutes 52 seconds
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; Checking &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;for &amp;lt;/span&amp;gt;dependents of upgraded formulae...
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; No dependents found!&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;(To set the option permanently and for all the Homebrew packages, you can add &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;export HOMEBREW_NO_INSTALL_CLEANUP=1&amp;lt;/code&amp;gt; to your bash profile but I donâ€™t recommend it.)&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;To check what you have locally (in this example, see line 7 and 9, I have 5.3.1 and 5.4.0):&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;&amp;lt;table class=&amp;quot;rouge-table&amp;quot;&amp;gt;&amp;lt;tbody&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;td class=&amp;quot;gutter gl&amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;lineno&amp;quot;&amp;gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td class=&amp;quot;code&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;~ &amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;brew info confluent-platform
confluent-platform: stable 5.4.0
Developer-optimized distribution of Apache Kafka
https://www.confluent.io/product/confluent-platform/
Conflicts with:
 kafka &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;because kafka also ships with identically named Kafka related executables&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;
/usr/local/Cellar/confluent-platform/5.3.1 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;2,499 files, 827.2MB&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;
 Built from &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;source &amp;lt;/span&amp;gt;on 2020-02-26 at 14:22:54
/usr/local/Cellar/confluent-platform/5.4.0 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;2,943 files, 951.4MB&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;*&amp;lt;/span&amp;gt;
 Built from &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;source &amp;lt;/span&amp;gt;on 2020-02-28 at 08:08:33
From: https://github.com/Homebrew/homebrew-core/blob/master/Formula/confluent-platform.rb
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; Requirements
Required: java &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt; 1.8 âœ”
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; Analytics
&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;install&amp;lt;/span&amp;gt;: 317 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;30 days&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;, 572 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;90 days&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;, 1,593 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;365 days&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;
install-on-request: 316 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;30 days&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;, 570 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;90 days&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;, 1,578 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;365 days&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;
build-error: 0 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;30 days&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&amp;lt;/tbody&amp;gt;&amp;lt;/table&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;You can also check what on the disk:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;~ &amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;ls&amp;lt;/span&amp;gt; /usr/local/Cellar/confluent-platform/
5.3.1	5.4.0&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;h1 id=&amp;quot;re-install-of-a-previous-version&amp;quot;&amp;gt;Re-install of a Previous Version&amp;lt;/h1&amp;gt;

&amp;lt;p&amp;gt;If you want to re-install a previous version:&amp;lt;/p&amp;gt;

&amp;lt;ol&amp;gt;
  &amp;lt;li&amp;gt;Get the commit number at &amp;lt;a href=&amp;quot;https://github.com/Homebrew/homebrew-core/commits/master/Formula/confluent-platform.rb&amp;quot;&amp;gt;https://github.com/Homebrew/homebrew-core/commits/master/Formula/confluent-platform.rb&amp;lt;/a&amp;gt;. If it says â€œthis commit history is taking too long to generateâ€, then clone &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;homebrew-core&amp;lt;/code&amp;gt; and check the commits there with &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;git log master -- Formula/confluent-platform.rb&amp;lt;/code&amp;gt;.&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;

&amp;lt;p&amp;gt;From the above page, you can get the commit numbers of the previous versions. For your convenience, I am listing here some of the recent ones:&amp;lt;/p&amp;gt;

&amp;lt;ul&amp;gt;
  &amp;lt;li&amp;gt;5.4.1  â‡¢ &amp;lt;a href=&amp;quot;https://raw.githubusercontent.com/Homebrew/homebrew-core/0a3b63e6acbc3257b804aa229900e7aed46b71b8/Formula/confluent-platform.rb&amp;quot;&amp;gt;https://raw.githubusercontent.com/Homebrew/homebrew-core/0a3b63e6acbc3257b804aa229900e7aed46b71b8/Formula/confluent-platform.rb&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;5.4.0  â‡¢ &amp;lt;a href=&amp;quot;https://raw.githubusercontent.com/Homebrew/homebrew-core/2e229452f5cb591391e6b3f649378ae6d9a1bd1f/Formula/confluent-platform.rb&amp;quot;&amp;gt;https://raw.githubusercontent.com/Homebrew/homebrew-core/2e229452f5cb591391e6b3f649378ae6d9a1bd1f/Formula/confluent-platform.rb&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;5.3.1  â‡¢ &amp;lt;a href=&amp;quot;https://raw.githubusercontent.com/Homebrew/homebrew-core/1135feef30ba254f692bbeb9afea097b395f3634/Formula/confluent-platform.rb&amp;quot;&amp;gt;https://raw.githubusercontent.com/Homebrew/homebrew-core/1135feef30ba254f692bbeb9afea097b395f3634/Formula/confluent-platform.rb&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;5.3.0  â‡¢ &amp;lt;a href=&amp;quot;https://raw.githubusercontent.com/Homebrew/homebrew-core/6a76b682ff4969afec52cc34be58315cee3271fe/Formula/confluent-platform.rb&amp;quot;&amp;gt;https://raw.githubusercontent.com/Homebrew/homebrew-core/6a76b682ff4969afec52cc34be58315cee3271fe/Formula/confluent-platform.rb&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

&amp;lt;p&amp;gt;For prior versions, itâ€™s a little more complicated as the formula was named &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;confluent-oss&amp;lt;/code&amp;gt; before.&amp;lt;/p&amp;gt;

&amp;lt;ol&amp;gt;
  &amp;lt;li&amp;gt;Reference the commit number in the install command, for example to install 5.3.0:&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;brew &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;install &amp;lt;/span&amp;gt;https://raw.githubusercontent.com/Homebrew/homebrew-core/6a76b682ff4969afec52cc34be58315cee3271fe/Formula/confluent-platform.rb&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;Now, check what you have (see above) and go crazy switching versions:&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;One last thing:&amp;lt;/p&amp;gt;
&amp;lt;ul&amp;gt;
  &amp;lt;li&amp;gt;Donâ€™t forget to &amp;lt;b&amp;gt;stop running instances&amp;lt;/b&amp;gt; before upgrade/switch operations. (Ctrl-C on your terminalsâ€¦)&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;To fully &amp;lt;b&amp;gt;reset your data&amp;lt;/b&amp;gt; (delete your topics and log files) between version switches, find where the topics are stored (check the &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;log.dirs&amp;lt;/code&amp;gt; config property, by default itâ€™s in &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;/tmp/kafka-logs&amp;lt;/code&amp;gt;):&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;rm&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;-rf&amp;lt;/span&amp;gt; /tmp/kafka-logs
&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;rm&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;-rf&amp;lt;/span&amp;gt; /var/log/kafka/&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;*&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;Thatâ€™s all, folks!&amp;lt;/p&amp;gt;

        Thu, 27 Feb 2020 00:00:00 +0000
        https://ldom.net/homebrew-switch-confluent-versions/
        https://ldom.net/homebrew-switch-confluent-versions/
        
        
      
    
      
        Install and Configure Apache Kafka and the Confluent Platform using Homebrew 
        &amp;lt;p&amp;gt;If youâ€™re on a Mac, among the many ways to install Apache Kafka and the Confluent Platform, there is &amp;lt;a href=&amp;quot;https://brew.sh&amp;quot;&amp;gt;Homebrew&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;The Confluent Platform is available there and installing it is as easy as &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;brew install confluent-platform&amp;lt;/code&amp;gt;.&amp;lt;/p&amp;gt;

&amp;lt;!--more--&amp;gt;

&amp;lt;p&amp;gt;Unfortunately, once youâ€™ve run that command, all the Confluent components are installed on your machine but itâ€™s not ready to start and thereâ€™s not much documentation to help you.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;The main advantages with using Homebrew to manage your Confluent packages is that you can have multiple versions of Confluent/Kafka installed and easily switch between them and &amp;lt;b&amp;gt;it uses a lot less resources than Docker&amp;lt;/b&amp;gt;.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Because of my &amp;lt;a href=&amp;quot;/work/&amp;quot;&amp;gt;work&amp;lt;/a&amp;gt;, I constantly have to alter my Kafka setup and try new things, so in this article, Iâ€™ll focus on starting and configuring things manually.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;To install, run:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;brew &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;install &amp;lt;/span&amp;gt;confluent-platform&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;Once this is done, your install is not fully functional. You also have to create the appropriate &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;/var/log&amp;lt;/code&amp;gt; folder:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;sudo mkdir&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;-p&amp;lt;/span&amp;gt; /var/log/kafka
&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;sudo chown&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;-R&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;si&amp;quot;&amp;gt;$(&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;whoami&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;si&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt; /var/log/kafka&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;Then youâ€™re ready to start a zookeeper and a broker.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;If you want to modify the configuration first, edit those files:&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;For zookeeper: &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;/usr/local/etc/kafka/zookeeper.properties&amp;lt;/code&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;For the broker: &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;/usr/local/etc/kafka/server.properties&amp;lt;/code&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;For connect: &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;/usr/local/etc/kafka/connect-distributed.properties&amp;lt;/code&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Note that &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;/usr/local/etc/kafka&amp;lt;/code&amp;gt; points to &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;/usr/local/Cellar/confluent-platform/5.3.1/etc/kafka/&amp;lt;/code&amp;gt; if youâ€™re using 5.3.1.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;When youâ€™re happy with the config files, open up a bunch of &amp;lt;a href=&amp;quot;https://iterm2.com/&amp;quot;&amp;gt;terminal windows&amp;lt;/a&amp;gt; and run the various components:&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;First, zookeeper:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;zookeeper-server-start /usr/local/etc/kafka/zookeeper.properties&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;Then a broker:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;kafka-server-start /usr/local/etc/kafka/server.properties&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;For a Connect in distributed mode:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;connect-distributed /usr/local/etc/kafka/connect-distributed.properties&amp;lt;span class=&amp;quot;sb&amp;quot;&amp;gt;`&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;Of course, in addition to the above, all the tools of the platform are installed:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;ls&amp;lt;/span&amp;gt; /usr/local/Cellar/confluent-platform/5.3.1/bin/
confluent-hub				kafka-api-start				kafka-mqtt-run-class			kafka-streams-application-reset		schema-registry-start
confluent-rebalancer			kafka-avro-console-consumer		kafka-mqtt-start			kafka-topics				schema-registry-stop
connect-distributed			kafka-avro-console-producer		kafka-mqtt-stop				kafka-verifiable-consumer		schema-registry-stop-service
connect-standalone			kafka-broker-api-versions		kafka-preferred-replica-election	kafka-verifiable-producer		security-plugins-run-class
control-center-3_0_0-reset		kafka-configs				kafka-producer-perf-test		ksql					sr-acl-cli
control-center-3_0_1-reset		kafka-console-consumer			kafka-reassign-partitions		ksql-datagen				stub-api-run-class
control-center-console-consumer		kafka-console-producer			kafka-replica-verification		ksql-print-metrics			stub-api-start
control-center-export			kafka-consumer-groups			kafka-rest-run-class			ksql-run-class				support-metrics-bundle
control-center-reset			kafka-consumer-perf-test		kafka-rest-start			ksql-server-start			zookeeper-security-migration
control-center-run-class		kafka-delegation-tokens			kafka-rest-stop				ksql-server-stop			zookeeper-server-start
control-center-set-acls			kafka-delete-records			kafka-rest-stop-service			ksql-stop				zookeeper-server-stop
control-center-start			kafka-dump-log				kafka-run-class				ksql-test-runner			zookeeper-shell
control-center-stop			kafka-log-dirs				kafka-server-start			replicator
kafka-acls				kafka-mirror-maker			kafka-server-stop			schema-registry-run-class&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;You can use them locally, for example:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;kafka-topics &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--zookeeper&amp;lt;/span&amp;gt; localhost:2181 &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--list&amp;lt;/span&amp;gt;
__confluent.support.metrics
__consumer_offsets
connect-configs
connect-offsets
connect-status
file_source
laurent
~ &amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;kafka-console-producer &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--broker-list&amp;lt;/span&amp;gt; localhost:9092 &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--topic&amp;lt;/span&amp;gt; laurent
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;one more line
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;err&amp;quot;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;If you want more than one zookeeper and one broker (which is enough for many local development tasks or configuration tests), you have to duplicate the configuration files, alter them (at least, add a &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;broker-id&amp;lt;/code&amp;gt; into the broker config and point the brokers to separate &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;log.dirs&amp;lt;/code&amp;gt; folders) and run the above commands into additional terminal windows pointing to separate config files.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;&amp;lt;img src=&amp;quot;/images/tech/homebrew-confluent.png&amp;quot; alt=&amp;quot;iTerm galore&amp;quot; /&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;And, yes, youâ€™ll end up with many terminal windows, but who cares.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;See also: &amp;lt;a href=&amp;quot;/homebrew-switch-confluent-versions/&amp;quot;&amp;gt;Switch Between Confluent Versions with Homebrew&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;

        Thu, 27 Feb 2020 00:00:00 +0000
        https://ldom.net/homebrew-confluent-platform/
        https://ldom.net/homebrew-confluent-platform/
        
        
      
    
      
        Carl von Ossietzky
        &amp;lt;p&amp;gt;Musing on the Wikipedia, I came across &amp;lt;a href=&amp;quot;https://en.wikipedia.org/wiki/Carl_von_Ossietzky&amp;quot;&amp;gt;this page&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Carl von Ossietzky (1889 â€” 1938) was a German journalist and pacifist that exposed the clandestine German re-armament between WW1 and 2 and was convicted of espionage in 1931 for it.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;He received the 1935 Nobel Peace Prize and died of tuberculosis while imprisoned.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Iâ€™m not going to paraphrase the wiki article here, you should read it. Thereâ€™s a few things that I find eye-opening in the troubled era that we live in. If History does not repeat itself, at least modern corrupted powers find a lot of inspiration in their models from the past.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Was he the first whislteblower? Certainly not, but this is one more stone in the garden of those who said (or keep saying) â€œwe didnâ€™t knowâ€.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Another fact is that he wasnâ€™t an extremist. He wrote for a journal that rejected Communism, but found the Social Democrat too compromised. Are whislteblowers extremists? I donâ€™t think so.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Being released after a first stay in prison, he didnâ€™t back out and wrote: &amp;lt;cite&amp;gt;â€œâ€¦/â€¦German and Jewish are not fixed categories established once and for all in some mystic prehistoric age, but rather flexible concepts which change their content with spiritual and economic changes dependent on the general dynamics of history.â€&amp;lt;/cite&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;He finally added: &amp;lt;cite&amp;gt;â€œToday there is a strong smell of blood in the air. Literary anti-Semitism forges the moral weapon for murder. Sturdy and honest lads will take care of the restâ€.&amp;lt;/cite&amp;gt; A visionary description of how a general cultural/societal atmosphere helps set the tone for more radical actions.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;After Hilter got to power, he continued to speak out against the nazis and ended up arrested under â€œprotective custodyâ€.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;The â€œprotective custodyâ€ has always been a convenient concept for abusing power. To protect them from a danger you helped created, you put your opponents in prison. Itâ€™s like jailing black people because they could be hurt by white nationalists. (Letâ€™s not give ideas to the fake president.)&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;When Ossietzky was awarded the Nobel Peace Prize in 1935, Hermann GÃ¶ring strongly suggested he declines the prize, saying that accepting it would mean excluding himself from the German people. Another early version of the ubiquitous but very tired: â€œif youâ€™re against me, youâ€™re anti-patrioticâ€.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;At last, what is sad is that Germanyâ€™s Federal Court of Justice didnâ€™t clear his conviction in 1992, applying the law as it stood in 1931. At least he got a memorial statue in Pankow. Iâ€™ll try to bring flowers there next time Iâ€™m in Berlin.&amp;lt;/p&amp;gt;

        Tue, 10 Dec 2019 00:00:00 +0000
        https://ldom.net/carl-von-ossietzky/
        https://ldom.net/carl-von-ossietzky/
        
        
      
    
      
        My secret trail recipes
        &amp;lt;p&amp;gt;OK, maybe not so secret, and maybe not so original, but hereâ€™s the breakdown.&amp;lt;/p&amp;gt;

&amp;lt;h1 id=&amp;quot;trail-mix&amp;quot;&amp;gt;trail mix&amp;lt;/h1&amp;gt;

&amp;lt;p&amp;gt;For 800g of mix (4 days at 200g per day)&amp;lt;/p&amp;gt;

&amp;lt;ul&amp;gt;
  &amp;lt;li&amp;gt;Dried banana: 100g &amp;amp;gt; 300 cal&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Raisin: 200g &amp;amp;gt; 600 cal&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Pumpkin seeds: 50g &amp;amp;gt; 310 cal&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Cajou nut: 100g &amp;amp;gt; 630 cal&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Dates: 150g &amp;amp;gt; 525 cal&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Almonds: 80g &amp;amp;gt; 530 cal&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Peanuts (unsalted): 120g &amp;amp;gt; 770 cal&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

&amp;lt;p&amp;gt;Total calories: 3,665 calories (approx. 460 cal/100g)&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Notes:&amp;lt;/p&amp;gt;
&amp;lt;ul&amp;gt;
  &amp;lt;li&amp;gt;Peanuts have the best calories/weight ratio but I get bored of them pretty quickly so I donâ€™t put that much in this mix.&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Fruits are great but they roughly have half the calories per weight as nuts.&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;On multi-day hikes, I take 200g per day of this mix, plus 2 snack bars for each day (small Snickers bars, Cliff, Kind or Kind Fruit bars).&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

&amp;lt;h1 id=&amp;quot;other-meals&amp;quot;&amp;gt;other meals&amp;lt;/h1&amp;gt;

&amp;lt;p&amp;gt;While weâ€™re talking about trail food, here is what I take for the other meals:&amp;lt;/p&amp;gt;

&amp;lt;ul&amp;gt;
  &amp;lt;li&amp;gt;For breakfast, I mix 50g of oatmeal with 35g of hot chocolate powder and 60g of muesli. I soak it in water for 1/2hr and that gives me 540 calories for a weight of 145g.&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;For lunch and diner, I used to have couscous (cold soaked) and 2 small dry sausages for 520 calories and 140g or cold soaked mashed potatoes and 2 slices of dried bacon for 620 cal and 185g. Now that Iâ€™m vegetarian, Iâ€™m going to have to find something to replace the sausages and bacon.&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

&amp;lt;p&amp;gt;In total, it is around 2,500 cal and 700g per day of food (not counting the few snack bars).&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;As I quickly get bored with eating the same thing every day, I tend to eat less each day on the trail, so I think from now on, Iâ€™ll go with 600g per day. I have reserves if you see what I mean and itâ€™s not over 4 to 8 days of hiking that Iâ€™m going to develop health problems if I donâ€™t eat enough calories per day. On a long thru-hike I would do differently of course.&amp;lt;/p&amp;gt;

&amp;lt;h1 id=&amp;quot;cold-soak-vs-warm-food&amp;quot;&amp;gt;cold-soak vs warm food&amp;lt;/h1&amp;gt;

&amp;lt;p&amp;gt;When I have to carry food on my back, I prefer to take less weight so I donâ€™t take a stove or cooking utensils. I only take food that I can cold-soak in water (dry mashed potatoes, couscous or ramen). To prepare it, I have a used ice-cream container with a screwed lid. Just put the food, add water, shake well and let it soak for half an hour.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;If Iâ€™m on a canoe or a motorcycle, then things are different, I take my little gas stove and I enjoy warm food (mostly pasta and ramen).&amp;lt;/p&amp;gt;

        Sat, 18 May 2019 00:00:00 +0000
        https://ldom.net/my-trail-recipes/
        https://ldom.net/my-trail-recipes/
        
        
      
    
      
        Why I cancelled my Amazon Prime subscription
        &amp;lt;p&amp;gt;We all know the Amazon marketplace and its features. Itâ€™s a fantastic machine for selling products online, probably the best in the world.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;One-click shopping, wish lists, save for later, the infinite selection of products and vendors, the lowest prices for most products, etc. With Prime you get all of this, plus free shipping on almost every item.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;This is partially the reason why I cancelled my Prime subscription and why Iâ€™m not buying anymore from Amazon and moving my stuff off of AWS.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;selfish reason: less shit you donâ€™t need&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;By not buying anymore from them, I buy a lot &amp;lt;strong&amp;gt;less stuff that I donâ€™t really need&amp;lt;/strong&amp;gt;. This is better for my budgetâ€¦&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;a sea of small packages delivered by an uber-ized workforce&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Then, Iâ€™m trying to &amp;lt;strong&amp;gt;buy less from online sources&amp;lt;/strong&amp;gt;. Buying online is great and convenient, but itâ€™s not really good for the planet to have all these small packets shipped in all directions. Itâ€™s also not good for the local shops. Whatâ€™s also infuriating is how their delivery process has been partially shifted to uber-ized people, using their personal car, carelessly dropping packets in front of the doors and paid for each item delivered. This form of employment is basically a return to 19th century practices, with the aid of 21th century technology. A shame.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;monopolies are bad&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Another reason is the &amp;lt;strong&amp;gt;dominant position of Amazon over online shopping&amp;lt;/strong&amp;gt;. Having such a big player killing all the competition is never good in the long run for consumers. There are already a lot of products that are difficult to find outside of Amazon.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;no social responsibility&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Finally thereâ€™s the &amp;lt;strong&amp;gt;appalling lack of social responsibility&amp;lt;/strong&amp;gt; of the company. From under-paying their employees, treating them like shit in fulfilment centres or even organizing this ridiculous global auction for HQ2. Why would you want to participate to this? If you want to know what social responsibility is, just look at what &amp;lt;a href=&amp;quot;https://www.patagonia.com/actionworks&amp;quot;&amp;gt;Patagonia&amp;lt;/a&amp;gt; does.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;gazillionaire&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Jeff Bezos got $24 billion richer during the pandemic. Any sense in being that rich, especially if you have no ideas about what to do with the money?&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;â€œThe only way that I can see to deploy this much financial resource is by converting my Amazon winnings into space travel. That is basically it.â€&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;How could you be so blind to not see the million ways these resources could be used in a better way than burning rocket fuel?&amp;lt;/p&amp;gt;

        Thu, 16 May 2019 00:00:00 +0000
        https://ldom.net/why-i-cancelled-my-prime/
        https://ldom.net/why-i-cancelled-my-prime/
        
        
      
    
      
        How to use a CI (CodeShip) to deploy a theme that won&#39;t build on Github pages
        &amp;lt;p&amp;gt;Github pages is a nice and free way to host a web site with static pages. It also supports &amp;lt;a href=&amp;quot;https://jekyllrb.com/&amp;quot;&amp;gt;Jekyll&amp;lt;/a&amp;gt; themes, which is great when you want to make things easier to edit and post.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Github pages has a bunch of themes ready to be used and they also support any Jekyll theme hosted on a public repository on github.com. You just have to use &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;remote_theme&amp;lt;/code&amp;gt; instead of &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;theme&amp;lt;/code&amp;gt; in the &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;__config.yml&amp;lt;/code&amp;gt; file.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;However, sometimes the theme that you have chosen builds without errors locally but doesnâ€™t build when Github tries to do it. And then the error message is everything but helpful.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Locally you get this:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;bundle &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;exec &amp;lt;/span&amp;gt;jekyll doctor &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--config&amp;lt;/span&amp;gt; _config.yml
Configuration file: _config.yml
  Your &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;test &amp;lt;/span&amp;gt;results are &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;in&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt; Everything looks fine.&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;And when Github builds it, you get this:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;The page build failed &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;for &amp;lt;/span&amp;gt;the master branch with the following error:

Page build failed. For more information, see https://help.github.com/en/articles/troubleshooting-github-pages-builds.&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;As you can see &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;Page build failed.&amp;lt;/code&amp;gt; is not very useful. After hours trying to find the potential errors that they mention in the troubleshooting page, I gave up and went for a different solution.&amp;lt;/p&amp;gt;

&amp;lt;!--more--&amp;gt;

&amp;lt;p&amp;gt;The solution is to use a second repository (in my case: &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;ldom-src&amp;lt;/code&amp;gt;) to host the source files with the theme. These are the files you were putting on the original repository for the github pages (in my case: &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;ldom&amp;lt;/code&amp;gt;). Then setup a CI server (Continuous Integration) to build the static files every time you push to the &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;-src&amp;lt;/code&amp;gt; repository and push the static file to the github pages repository.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Of course, you can put together the CI server yourself, using Jenkins for example, but itâ€™s easier when you donâ€™t have to manage a server for that. CodeShip is a CI service (I have no affiliation with them) that offers a free account limited to 100 builds per month (which is plenty for a personal site that youâ€™ll update 30 times max per month).&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Here is how you set it up and the scripts to use:&amp;lt;/p&amp;gt;

&amp;lt;ol&amp;gt;
  &amp;lt;li&amp;gt;Go to &amp;lt;a href=&amp;quot;https://codeship.com&amp;quot;&amp;gt;https://codeship.com&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Sign up for the free tier.&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Create a new project.&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;

&amp;lt;p&amp;gt;In the Setup Commands tab, select â€œI want to create my own custom commandsâ€ and use:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;&amp;lt;table class=&amp;quot;rouge-table&amp;quot;&amp;gt;&amp;lt;tbody&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;td class=&amp;quot;gutter gl&amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;lineno&amp;quot;&amp;gt;1
2
&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td class=&amp;quot;code&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;bundle &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;install
&amp;lt;/span&amp;gt;bundle &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;exec &amp;lt;/span&amp;gt;jekyll build &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--config&amp;lt;/span&amp;gt; _config.yml
&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&amp;lt;/tbody&amp;gt;&amp;lt;/table&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;In the Setup Commands text area, use:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-shell&amp;quot; data-lang=&amp;quot;shell&amp;quot;&amp;gt;&amp;lt;table class=&amp;quot;rouge-table&amp;quot;&amp;gt;&amp;lt;tbody&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;td class=&amp;quot;gutter gl&amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;lineno&amp;quot;&amp;gt;1
2
3
4
5
6
7
8
9
10
11
12
&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td class=&amp;quot;code&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;REMOTE_REPOSITORY&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;${&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;REMOTE_REPOSITORY&amp;lt;/span&amp;gt;:?&amp;lt;span class=&amp;quot;s1&amp;quot;&amp;gt;&#39;You need to configure the REMOTE_REPOSITORY environment variable!&#39;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;REMOTE_BRANCH&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;${&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;REMOTE_BRANCH&amp;lt;/span&amp;gt;:?&amp;lt;span class=&amp;quot;s1&amp;quot;&amp;gt;&#39;You need to configure the REMOTE_BRANCH environment variable!&#39;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;set&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;-e&amp;lt;/span&amp;gt;
git config &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--global&amp;lt;/span&amp;gt; user.email &amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;&amp;amp;lt;your email&amp;amp;gt;&amp;quot;&amp;lt;/span&amp;gt;
git config &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--global&amp;lt;/span&amp;gt; user.name &amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;&amp;amp;lt;your name&amp;amp;gt; (codeship)&amp;quot;&amp;lt;/span&amp;gt;
git clone &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;${&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;REMOTE_REPOSITORY&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;}&amp;lt;/span&amp;gt; _tmp &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;-b&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;${&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;REMOTE_BRANCH&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;cp&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;-R&amp;lt;/span&amp;gt; _site/&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;*&amp;lt;/span&amp;gt; _tmp/
&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;cd &amp;lt;/span&amp;gt;_tmp
git add &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;
git status
git commit &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;-m&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;new build&amp;quot;&amp;lt;/span&amp;gt;
git push origin master
&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&amp;lt;/tbody&amp;gt;&amp;lt;/table&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;In the Environment tab, create 2 environment variables (to be used in the script above):&amp;lt;/p&amp;gt;
&amp;lt;ul&amp;gt;
  &amp;lt;li&amp;gt;&amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;REMOTE_REPOSITORY&amp;lt;/code&amp;gt;: put the address of the destination repository, the one for the static Github pages, eg. &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;git@github.com:ldom/ldom.git&amp;lt;/code&amp;gt;&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;&amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;REMOTE_BRANCH&amp;lt;/code&amp;gt;: put &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;master&amp;lt;/code&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

&amp;lt;ol&amp;gt;
  &amp;lt;li&amp;gt;The last step is to configure CodeShip and Github to allow the deploy script to push (write) to the destination repository.&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;

&amp;lt;p&amp;gt;This is described on this page: &amp;lt;a href=&amp;quot;https://documentation.codeship.com/basic/builds-and-configuration/access-to-other-repositories/#sts=The%20Machine%20User%20Solution&amp;quot;&amp;gt;https://documentation.codeship.com/basic/builds-and-configuration/access-to-other-repositories/#sts=The%20Machine%20User%20Solution&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;I recommend using the â€œMachine Userâ€ solution. 
It involves:&amp;lt;/p&amp;gt;
&amp;lt;ul&amp;gt;
  &amp;lt;li&amp;gt;creating a new github.com user and&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;give it access to the destination repository (by inviting it as a collaborator in the destination repository),&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;then you have to remove the key from the Deploy section under the destination repository (not your user settings, but the repository settings).&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;At last, you need to put that key (that has to be copied from General tab of the Project Settings in CodeShip) as a new key on the â€œMachine Userâ€ github account. (Note that if you donâ€™t remove it first from the Deploy settings of the destination repository, you wonâ€™t be able to add that key to the â€œMachine Userâ€ keys).&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

&amp;lt;p&amp;gt;Once all of this is done, youâ€™ll enjoy a full automated (and free) system where you just have to push to the &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;-src&amp;lt;/code&amp;gt; repository for everything to be built and deployed to Github pages!&amp;lt;/p&amp;gt;

        Fri, 10 May 2019 00:00:00 +0000
        https://ldom.net/ci-for-github-pages/
        https://ldom.net/ci-for-github-pages/">





<link rel="canonical" href="https://ldom.net/feed.xml">


    <!-- Facebook Open Graph -->
  <meta property="og:title" content="RSS Feed">
  <meta property="og:description" content="Ldom.net â€“ 
    
    https://ldom.net/
    
    Tue, 09 Jun 2020 21:45:01 +0000
    Tue, 09 Jun 2020 21:45:01 +0000
    Jekyll v4.1.0
    
      
        Create Multi-Region Topics Programmatically With Python and confluent-kafka-python
        &amp;lt;p&amp;gt;Confluent Platform 5.4 introduced Multi-Region Clusters (MRC). MRC adds numerous cool features such as Follower-Fetching or asynchronous Observers.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;This article explains how to create topics with replicas and observers programmatically using python.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;More details on MRC clusters: &amp;lt;a href=&amp;quot;https://docs.confluent.io/current/multi-dc-deployments/multi-region.html&amp;quot;&amp;gt;https://docs.confluent.io/current/multi-dc-deployments/multi-region.html&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;!--more--&amp;gt;

&amp;lt;p&amp;gt;To create a topic with replicas and (asynchronous) observers, you have to pass replica and observers placement details in the form of a JSON object.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Here is an example using the command-line:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;cat &amp;lt;/span&amp;gt;placement.json
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;version&amp;quot;&amp;lt;/span&amp;gt;:1,&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;replicas&amp;quot;&amp;lt;/span&amp;gt;:[&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;count&amp;quot;&amp;lt;/span&amp;gt;:2,&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;constraints&amp;quot;&amp;lt;/span&amp;gt;:&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;rack&amp;quot;&amp;lt;/span&amp;gt;:&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;east&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;}}]&amp;lt;/span&amp;gt;,&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;observers&amp;quot;&amp;lt;/span&amp;gt;:[&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;count&amp;quot;&amp;lt;/span&amp;gt;:1,&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;constraints&amp;quot;&amp;lt;/span&amp;gt;:&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;rack&amp;quot;&amp;lt;/span&amp;gt;:&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;west&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;}}]}&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;err&amp;quot;&amp;gt;$&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;kafka-topics  &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--create&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--bootstrap-server&amp;lt;/span&amp;gt; &amp;amp;lt;IP address&amp;amp;gt;:9092 &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--topic&amp;lt;/span&amp;gt; test2 &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--partitions&amp;lt;/span&amp;gt; 5 &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--replica-placement&amp;lt;/span&amp;gt; placement.json
&amp;lt;span class=&amp;quot;err&amp;quot;&amp;gt;$&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;kafka-topics &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--zookeeper&amp;lt;/span&amp;gt; &amp;amp;lt;IP address&amp;amp;gt;:2181 &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--describe&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--topic&amp;lt;/span&amp;gt; test2

Topic: test2	PartitionCount: 5	ReplicationFactor: 3	Configs: confluent.placement.constraints&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;={&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;version&amp;quot;&amp;lt;/span&amp;gt;:1,&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;replicas&amp;quot;&amp;lt;/span&amp;gt;:[&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;count&amp;quot;&amp;lt;/span&amp;gt;:2,&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;constraints&amp;quot;&amp;lt;/span&amp;gt;:&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;rack&amp;quot;&amp;lt;/span&amp;gt;:&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;east&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;}}]&amp;lt;/span&amp;gt;,&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;observers&amp;quot;&amp;lt;/span&amp;gt;:[&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;count&amp;quot;&amp;lt;/span&amp;gt;:1,&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;constraints&amp;quot;&amp;lt;/span&amp;gt;:&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;rack&amp;quot;&amp;lt;/span&amp;gt;:&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;west&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;}}]}&amp;lt;/span&amp;gt;
	Topic: test2	Partition: 0	Leader: 2	Replicas: 2,3,4	Isr: 2,3	Offline:
	Topic: test2	Partition: 1	Leader: 3	Replicas: 3,1,5	Isr: 3,1	Offline:
	Topic: test2	Partition: 2	Leader: 1	Replicas: 1,2,4	Isr: 1,2	Offline:
	Topic: test2	Partition: 3	Leader: 2	Replicas: 2,1,5	Isr: 2,1	Offline:
	Topic: test2	Partition: 4	Leader: 3	Replicas: 3,2,4	Isr: 3,2	Offline:&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;To do the same programmatically with python, you have to use the &amp;lt;a href=&amp;quot;https://docs.confluent.io/current/clients/confluent-kafka-python/&amp;quot;&amp;gt;confluent-kafka-python&amp;lt;/a&amp;gt; python library.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Specific to MRC is that you have to pass a config dict with &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;confluent.placement.constraints&amp;lt;/code&amp;gt; instead of the &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;replication_factor&amp;lt;/code&amp;gt; argument. See line 5 below.&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-python&amp;quot; data-lang=&amp;quot;python&amp;quot;&amp;gt;&amp;lt;table class=&amp;quot;rouge-table&amp;quot;&amp;gt;&amp;lt;tbody&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;td class=&amp;quot;gutter gl&amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;lineno&amp;quot;&amp;gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td class=&amp;quot;code&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;span class=&amp;quot;kn&amp;quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nn&amp;quot;&amp;gt;confluent_kafka.admin&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;kn&amp;quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;AdminClient&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;NewTopic&amp;lt;/span&amp;gt;

&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;placement&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;&amp;quot;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;version&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:1,&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;replicas&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:[{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;count&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:2,&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;constraints&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;rack&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;east&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;}}],&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;observers&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:[{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;count&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:1,&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;constraints&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;rack&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;west&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;}}]}&amp;quot;&amp;lt;/span&amp;gt;

&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;new_topic&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;NewTopic&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;&amp;quot;test1&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;num_partitions&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;mi&amp;quot;&amp;gt;5&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;config&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;&#39;confluent.placement.constraints&#39;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;placement&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;})]&amp;lt;/span&amp;gt;

&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;a&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;AdminClient&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;({&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;&#39;bootstrap.servers&#39;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;&#39;&amp;amp;lt;IP address&amp;amp;gt;:9092&#39;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;})&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;res&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;a&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;create_topics&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;new_topic&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;

&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;for&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;topic&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;f&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;ow&amp;quot;&amp;gt;in&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;res&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;():&amp;lt;/span&amp;gt;
    &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;try&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;
        &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;f&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;result&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;()&amp;lt;/span&amp;gt;
        &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;print&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;&amp;quot;Topic {} created&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;format&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;topic&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;))&amp;lt;/span&amp;gt;
    &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;except&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;Exception&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;as&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;e&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;
        &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;print&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;&amp;quot;Failed to create topic {}: {}&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;format&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;topic&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;e&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;))&amp;lt;/span&amp;gt;
&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&amp;lt;/tbody&amp;gt;&amp;lt;/table&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;Thatâ€™s it!&amp;lt;/p&amp;gt;

        Mon, 18 May 2020 00:00:00 +0000
        https://ldom.net/create-mrc-topics-programmatically-with-python/
        https://ldom.net/create-mrc-topics-programmatically-with-python/
        
        
      
    
      
        Switch Between Apache Kafka and Confluent Versions with Homebrew
        &amp;lt;p&amp;gt;Once youâ€™ve installed Apache Kafka and the Confluent Platform using &amp;lt;a href=&amp;quot;https://brew.sh&amp;quot;&amp;gt;Homebrew&amp;lt;/a&amp;gt;, there are many ways to maintain multiple versions of the package on your local computer.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;(This is kinda part 2 of &amp;lt;a href=&amp;quot;/homebrew-confluent-platform/&amp;quot;&amp;gt;Install and Configure Apache Kafka and the Confluent Platform using Homebrew&amp;lt;/a&amp;gt;.)&amp;lt;/p&amp;gt;

&amp;lt;!--more--&amp;gt;

&amp;lt;p&amp;gt;To switch from a version to another with Homebrew (here: 5.3.1), simply do:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;brew switch confluent-platform 5.3.1&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;This is great but it relies on the fact that the version you want to switch to is currently installed locally in your cellar. If itâ€™s the case, Homebrew does the switch instantly by updating symlinks.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;There are several ways to ensure that you have all the versions that you want in your local computer. At some point, they will collide with the fact that Homebrew does a cleanup every 30 days or each time you run an upgrade, unless you the &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;HOMEBREW_NO_INSTALL_CLEANUP&amp;lt;/code&amp;gt; envvar.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;You can:&amp;lt;/p&amp;gt;

&amp;lt;ol&amp;gt;
  &amp;lt;li&amp;gt;
    &amp;lt;p&amp;gt;Use &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;HOMEBREW_NO_INSTALL_CLEANUP&amp;lt;/code&amp;gt; when upgrading all Homebrew packages to keep the previous versions on your disk. Unless it is set, &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;brew cleanup&amp;lt;/code&amp;gt; will be run for the formula that youâ€™re upgrading or, every 30 days, for all formulae. It will fill your disk quite quickly if you use a lot of packages and unless youâ€™re super careful, youâ€™ll loose your previous versions sooner or later.&amp;lt;/p&amp;gt;
  &amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;
    &amp;lt;p&amp;gt;Build you own keg and feed it with the versions that you want to keep using &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;brew extract&amp;lt;/code&amp;gt;. Too much work IMHO.&amp;lt;/p&amp;gt;
  &amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;
    &amp;lt;p&amp;gt;Use &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;HOMEBREW_NO_INSTALL_CLEANUP&amp;lt;/code&amp;gt; when upgrading &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;confluent-platform&amp;lt;/code&amp;gt;. If the version you want is gone, restore it using &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;brew install&amp;lt;/code&amp;gt; referencing the &amp;lt;b&amp;gt;specific commit number&amp;lt;/b&amp;gt;. (Also remember to backup the Confluent/Kafka config files in a folder outside of Homebrew.)&amp;lt;/p&amp;gt;
  &amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;

&amp;lt;p&amp;gt;In this article, Iâ€™m describing Option 3.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Reference points:&amp;lt;/p&amp;gt;

&amp;lt;ul&amp;gt;
  &amp;lt;li&amp;gt;&amp;lt;a href=&amp;quot;https://formulae.brew.sh/formula/confluent-platform&amp;quot;&amp;gt;https://formulae.brew.sh/formula/confluent-platform&amp;lt;/a&amp;gt; â€“&amp;amp;gt; page for the formula in Homebrew&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;&amp;lt;a href=&amp;quot;https://github.com/Homebrew/homebrew-core/blob/master/Formula/confluent-platform.rb&amp;quot;&amp;gt;https://github.com/Homebrew/homebrew-core/blob/master/Formula/confluent-platform.rb&amp;lt;/a&amp;gt; â€“&amp;amp;gt; location of the formula for the Confluent Platform in the repo&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;&amp;lt;a href=&amp;quot;https://github.com/Homebrew/homebrew-core/commits/master/Formula/confluent-platform.rb&amp;quot;&amp;gt;https://github.com/Homebrew/homebrew-core/commits/master/Formula/confluent-platform.rb&amp;lt;/a&amp;gt; â€“&amp;amp;gt; commit history of the formula&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

&amp;lt;h1 id=&amp;quot;first-install&amp;quot;&amp;gt;First Install&amp;lt;/h1&amp;gt;

&amp;lt;p&amp;gt;To install for the first time, run:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;brew &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;install &amp;lt;/span&amp;gt;confluent-platform&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;h1 id=&amp;quot;upgrades&amp;quot;&amp;gt;Upgrades&amp;lt;/h1&amp;gt;

&amp;lt;p&amp;gt;To upgrade without removing the previous versions, run:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;~ &amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ HOMEBREW_NO_INSTALL_CLEANUP&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt;1 brew upgrade confluent-platform
Updating Homebrew...
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; Auto-updated Homebrew!
Updated 1 tap &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;homebrew/core&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; Updated Formulae
.../...

&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; Upgrading 1 outdated package:
confluent-platform 5.3.1 -&amp;amp;gt; 5.4.0
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; Upgrading confluent-platform
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; Downloading https://packages.confluent.io/archive/5.4/confluent-5.4.0-2.12.tar.gz
&amp;lt;span class=&amp;quot;c&amp;quot;&amp;gt;######################################################################## 100.0%&amp;lt;/span&amp;gt;
ðŸº  /usr/local/Cellar/confluent-platform/5.4.0: 2,943 files, 951.4MB, built &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;in &amp;lt;/span&amp;gt;85 minutes 52 seconds
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; Checking &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;for &amp;lt;/span&amp;gt;dependents of upgraded formulae...
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; No dependents found!&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;(To set the option permanently and for all the Homebrew packages, you can add &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;export HOMEBREW_NO_INSTALL_CLEANUP=1&amp;lt;/code&amp;gt; to your bash profile but I donâ€™t recommend it.)&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;To check what you have locally (in this example, see line 7 and 9, I have 5.3.1 and 5.4.0):&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;&amp;lt;table class=&amp;quot;rouge-table&amp;quot;&amp;gt;&amp;lt;tbody&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;td class=&amp;quot;gutter gl&amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;lineno&amp;quot;&amp;gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td class=&amp;quot;code&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;~ &amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;brew info confluent-platform
confluent-platform: stable 5.4.0
Developer-optimized distribution of Apache Kafka
https://www.confluent.io/product/confluent-platform/
Conflicts with:
 kafka &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;because kafka also ships with identically named Kafka related executables&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;
/usr/local/Cellar/confluent-platform/5.3.1 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;2,499 files, 827.2MB&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;
 Built from &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;source &amp;lt;/span&amp;gt;on 2020-02-26 at 14:22:54
/usr/local/Cellar/confluent-platform/5.4.0 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;2,943 files, 951.4MB&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;*&amp;lt;/span&amp;gt;
 Built from &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;source &amp;lt;/span&amp;gt;on 2020-02-28 at 08:08:33
From: https://github.com/Homebrew/homebrew-core/blob/master/Formula/confluent-platform.rb
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; Requirements
Required: java &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt; 1.8 âœ”
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; Analytics
&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;install&amp;lt;/span&amp;gt;: 317 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;30 days&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;, 572 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;90 days&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;, 1,593 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;365 days&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;
install-on-request: 316 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;30 days&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;, 570 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;90 days&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;, 1,578 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;365 days&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;
build-error: 0 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;30 days&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&amp;lt;/tbody&amp;gt;&amp;lt;/table&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;You can also check what on the disk:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;~ &amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;ls&amp;lt;/span&amp;gt; /usr/local/Cellar/confluent-platform/
5.3.1	5.4.0&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;h1 id=&amp;quot;re-install-of-a-previous-version&amp;quot;&amp;gt;Re-install of a Previous Version&amp;lt;/h1&amp;gt;

&amp;lt;p&amp;gt;If you want to re-install a previous version:&amp;lt;/p&amp;gt;

&amp;lt;ol&amp;gt;
  &amp;lt;li&amp;gt;Get the commit number at &amp;lt;a href=&amp;quot;https://github.com/Homebrew/homebrew-core/commits/master/Formula/confluent-platform.rb&amp;quot;&amp;gt;https://github.com/Homebrew/homebrew-core/commits/master/Formula/confluent-platform.rb&amp;lt;/a&amp;gt;. If it says â€œthis commit history is taking too long to generateâ€, then clone &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;homebrew-core&amp;lt;/code&amp;gt; and check the commits there with &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;git log master -- Formula/confluent-platform.rb&amp;lt;/code&amp;gt;.&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;

&amp;lt;p&amp;gt;From the above page, you can get the commit numbers of the previous versions. For your convenience, I am listing here some of the recent ones:&amp;lt;/p&amp;gt;

&amp;lt;ul&amp;gt;
  &amp;lt;li&amp;gt;5.4.1  â‡¢ &amp;lt;a href=&amp;quot;https://raw.githubusercontent.com/Homebrew/homebrew-core/0a3b63e6acbc3257b804aa229900e7aed46b71b8/Formula/confluent-platform.rb&amp;quot;&amp;gt;https://raw.githubusercontent.com/Homebrew/homebrew-core/0a3b63e6acbc3257b804aa229900e7aed46b71b8/Formula/confluent-platform.rb&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;5.4.0  â‡¢ &amp;lt;a href=&amp;quot;https://raw.githubusercontent.com/Homebrew/homebrew-core/2e229452f5cb591391e6b3f649378ae6d9a1bd1f/Formula/confluent-platform.rb&amp;quot;&amp;gt;https://raw.githubusercontent.com/Homebrew/homebrew-core/2e229452f5cb591391e6b3f649378ae6d9a1bd1f/Formula/confluent-platform.rb&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;5.3.1  â‡¢ &amp;lt;a href=&amp;quot;https://raw.githubusercontent.com/Homebrew/homebrew-core/1135feef30ba254f692bbeb9afea097b395f3634/Formula/confluent-platform.rb&amp;quot;&amp;gt;https://raw.githubusercontent.com/Homebrew/homebrew-core/1135feef30ba254f692bbeb9afea097b395f3634/Formula/confluent-platform.rb&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;5.3.0  â‡¢ &amp;lt;a href=&amp;quot;https://raw.githubusercontent.com/Homebrew/homebrew-core/6a76b682ff4969afec52cc34be58315cee3271fe/Formula/confluent-platform.rb&amp;quot;&amp;gt;https://raw.githubusercontent.com/Homebrew/homebrew-core/6a76b682ff4969afec52cc34be58315cee3271fe/Formula/confluent-platform.rb&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

&amp;lt;p&amp;gt;For prior versions, itâ€™s a little more complicated as the formula was named &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;confluent-oss&amp;lt;/code&amp;gt; before.&amp;lt;/p&amp;gt;

&amp;lt;ol&amp;gt;
  &amp;lt;li&amp;gt;Reference the commit number in the install command, for example to install 5.3.0:&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;brew &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;install &amp;lt;/span&amp;gt;https://raw.githubusercontent.com/Homebrew/homebrew-core/6a76b682ff4969afec52cc34be58315cee3271fe/Formula/confluent-platform.rb&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;Now, check what you have (see above) and go crazy switching versions:&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;One last thing:&amp;lt;/p&amp;gt;
&amp;lt;ul&amp;gt;
  &amp;lt;li&amp;gt;Donâ€™t forget to &amp;lt;b&amp;gt;stop running instances&amp;lt;/b&amp;gt; before upgrade/switch operations. (Ctrl-C on your terminalsâ€¦)&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;To fully &amp;lt;b&amp;gt;reset your data&amp;lt;/b&amp;gt; (delete your topics and log files) between version switches, find where the topics are stored (check the &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;log.dirs&amp;lt;/code&amp;gt; config property, by default itâ€™s in &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;/tmp/kafka-logs&amp;lt;/code&amp;gt;):&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;rm&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;-rf&amp;lt;/span&amp;gt; /tmp/kafka-logs
&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;rm&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;-rf&amp;lt;/span&amp;gt; /var/log/kafka/&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;*&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;Thatâ€™s all, folks!&amp;lt;/p&amp;gt;

        Thu, 27 Feb 2020 00:00:00 +0000
        https://ldom.net/homebrew-switch-confluent-versions/
        https://ldom.net/homebrew-switch-confluent-versions/
        
        
      
    
      
        Install and Configure Apache Kafka and the Confluent Platform using Homebrew 
        &amp;lt;p&amp;gt;If youâ€™re on a Mac, among the many ways to install Apache Kafka and the Confluent Platform, there is &amp;lt;a href=&amp;quot;https://brew.sh&amp;quot;&amp;gt;Homebrew&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;The Confluent Platform is available there and installing it is as easy as &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;brew install confluent-platform&amp;lt;/code&amp;gt;.&amp;lt;/p&amp;gt;

&amp;lt;!--more--&amp;gt;

&amp;lt;p&amp;gt;Unfortunately, once youâ€™ve run that command, all the Confluent components are installed on your machine but itâ€™s not ready to start and thereâ€™s not much documentation to help you.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;The main advantages with using Homebrew to manage your Confluent packages is that you can have multiple versions of Confluent/Kafka installed and easily switch between them and &amp;lt;b&amp;gt;it uses a lot less resources than Docker&amp;lt;/b&amp;gt;.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Because of my &amp;lt;a href=&amp;quot;/work/&amp;quot;&amp;gt;work&amp;lt;/a&amp;gt;, I constantly have to alter my Kafka setup and try new things, so in this article, Iâ€™ll focus on starting and configuring things manually.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;To install, run:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;brew &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;install &amp;lt;/span&amp;gt;confluent-platform&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;Once this is done, your install is not fully functional. You also have to create the appropriate &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;/var/log&amp;lt;/code&amp;gt; folder:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;sudo mkdir&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;-p&amp;lt;/span&amp;gt; /var/log/kafka
&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;sudo chown&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;-R&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;si&amp;quot;&amp;gt;$(&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;whoami&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;si&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt; /var/log/kafka&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;Then youâ€™re ready to start a zookeeper and a broker.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;If you want to modify the configuration first, edit those files:&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;For zookeeper: &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;/usr/local/etc/kafka/zookeeper.properties&amp;lt;/code&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;For the broker: &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;/usr/local/etc/kafka/server.properties&amp;lt;/code&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;For connect: &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;/usr/local/etc/kafka/connect-distributed.properties&amp;lt;/code&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Note that &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;/usr/local/etc/kafka&amp;lt;/code&amp;gt; points to &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;/usr/local/Cellar/confluent-platform/5.3.1/etc/kafka/&amp;lt;/code&amp;gt; if youâ€™re using 5.3.1.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;When youâ€™re happy with the config files, open up a bunch of &amp;lt;a href=&amp;quot;https://iterm2.com/&amp;quot;&amp;gt;terminal windows&amp;lt;/a&amp;gt; and run the various components:&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;First, zookeeper:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;zookeeper-server-start /usr/local/etc/kafka/zookeeper.properties&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;Then a broker:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;kafka-server-start /usr/local/etc/kafka/server.properties&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;For a Connect in distributed mode:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;connect-distributed /usr/local/etc/kafka/connect-distributed.properties&amp;lt;span class=&amp;quot;sb&amp;quot;&amp;gt;`&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;Of course, in addition to the above, all the tools of the platform are installed:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;ls&amp;lt;/span&amp;gt; /usr/local/Cellar/confluent-platform/5.3.1/bin/
confluent-hub				kafka-api-start				kafka-mqtt-run-class			kafka-streams-application-reset		schema-registry-start
confluent-rebalancer			kafka-avro-console-consumer		kafka-mqtt-start			kafka-topics				schema-registry-stop
connect-distributed			kafka-avro-console-producer		kafka-mqtt-stop				kafka-verifiable-consumer		schema-registry-stop-service
connect-standalone			kafka-broker-api-versions		kafka-preferred-replica-election	kafka-verifiable-producer		security-plugins-run-class
control-center-3_0_0-reset		kafka-configs				kafka-producer-perf-test		ksql					sr-acl-cli
control-center-3_0_1-reset		kafka-console-consumer			kafka-reassign-partitions		ksql-datagen				stub-api-run-class
control-center-console-consumer		kafka-console-producer			kafka-replica-verification		ksql-print-metrics			stub-api-start
control-center-export			kafka-consumer-groups			kafka-rest-run-class			ksql-run-class				support-metrics-bundle
control-center-reset			kafka-consumer-perf-test		kafka-rest-start			ksql-server-start			zookeeper-security-migration
control-center-run-class		kafka-delegation-tokens			kafka-rest-stop				ksql-server-stop			zookeeper-server-start
control-center-set-acls			kafka-delete-records			kafka-rest-stop-service			ksql-stop				zookeeper-server-stop
control-center-start			kafka-dump-log				kafka-run-class				ksql-test-runner			zookeeper-shell
control-center-stop			kafka-log-dirs				kafka-server-start			replicator
kafka-acls				kafka-mirror-maker			kafka-server-stop			schema-registry-run-class&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;You can use them locally, for example:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;kafka-topics &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--zookeeper&amp;lt;/span&amp;gt; localhost:2181 &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--list&amp;lt;/span&amp;gt;
__confluent.support.metrics
__consumer_offsets
connect-configs
connect-offsets
connect-status
file_source
laurent
~ &amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;kafka-console-producer &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--broker-list&amp;lt;/span&amp;gt; localhost:9092 &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--topic&amp;lt;/span&amp;gt; laurent
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;one more line
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;err&amp;quot;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;If you want more than one zookeeper and one broker (which is enough for many local development tasks or configuration tests), you have to duplicate the configuration files, alter them (at least, add a &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;broker-id&amp;lt;/code&amp;gt; into the broker config and point the brokers to separate &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;log.dirs&amp;lt;/code&amp;gt; folders) and run the above commands into additional terminal windows pointing to separate config files.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;&amp;lt;img src=&amp;quot;/images/tech/homebrew-confluent.png&amp;quot; alt=&amp;quot;iTerm galore&amp;quot; /&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;And, yes, youâ€™ll end up with many terminal windows, but who cares.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;See also: &amp;lt;a href=&amp;quot;/homebrew-switch-confluent-versions/&amp;quot;&amp;gt;Switch Between Confluent Versions with Homebrew&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;

        Thu, 27 Feb 2020 00:00:00 +0000
        https://ldom.net/homebrew-confluent-platform/
        https://ldom.net/homebrew-confluent-platform/
        
        
      
    
      
        Carl von Ossietzky
        &amp;lt;p&amp;gt;Musing on the Wikipedia, I came across &amp;lt;a href=&amp;quot;https://en.wikipedia.org/wiki/Carl_von_Ossietzky&amp;quot;&amp;gt;this page&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Carl von Ossietzky (1889 â€” 1938) was a German journalist and pacifist that exposed the clandestine German re-armament between WW1 and 2 and was convicted of espionage in 1931 for it.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;He received the 1935 Nobel Peace Prize and died of tuberculosis while imprisoned.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Iâ€™m not going to paraphrase the wiki article here, you should read it. Thereâ€™s a few things that I find eye-opening in the troubled era that we live in. If History does not repeat itself, at least modern corrupted powers find a lot of inspiration in their models from the past.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Was he the first whislteblower? Certainly not, but this is one more stone in the garden of those who said (or keep saying) â€œwe didnâ€™t knowâ€.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Another fact is that he wasnâ€™t an extremist. He wrote for a journal that rejected Communism, but found the Social Democrat too compromised. Are whislteblowers extremists? I donâ€™t think so.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Being released after a first stay in prison, he didnâ€™t back out and wrote: &amp;lt;cite&amp;gt;â€œâ€¦/â€¦German and Jewish are not fixed categories established once and for all in some mystic prehistoric age, but rather flexible concepts which change their content with spiritual and economic changes dependent on the general dynamics of history.â€&amp;lt;/cite&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;He finally added: &amp;lt;cite&amp;gt;â€œToday there is a strong smell of blood in the air. Literary anti-Semitism forges the moral weapon for murder. Sturdy and honest lads will take care of the restâ€.&amp;lt;/cite&amp;gt; A visionary description of how a general cultural/societal atmosphere helps set the tone for more radical actions.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;After Hilter got to power, he continued to speak out against the nazis and ended up arrested under â€œprotective custodyâ€.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;The â€œprotective custodyâ€ has always been a convenient concept for abusing power. To protect them from a danger you helped created, you put your opponents in prison. Itâ€™s like jailing black people because they could be hurt by white nationalists. (Letâ€™s not give ideas to the fake president.)&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;When Ossietzky was awarded the Nobel Peace Prize in 1935, Hermann GÃ¶ring strongly suggested he declines the prize, saying that accepting it would mean excluding himself from the German people. Another early version of the ubiquitous but very tired: â€œif youâ€™re against me, youâ€™re anti-patrioticâ€.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;At last, what is sad is that Germanyâ€™s Federal Court of Justice didnâ€™t clear his conviction in 1992, applying the law as it stood in 1931. At least he got a memorial statue in Pankow. Iâ€™ll try to bring flowers there next time Iâ€™m in Berlin.&amp;lt;/p&amp;gt;

        Tue, 10 Dec 2019 00:00:00 +0000
        https://ldom.net/carl-von-ossietzky/
        https://ldom.net/carl-von-ossietzky/
        
        
      
    
      
        My secret trail recipes
        &amp;lt;p&amp;gt;OK, maybe not so secret, and maybe not so original, but hereâ€™s the breakdown.&amp;lt;/p&amp;gt;

&amp;lt;h1 id=&amp;quot;trail-mix&amp;quot;&amp;gt;trail mix&amp;lt;/h1&amp;gt;

&amp;lt;p&amp;gt;For 800g of mix (4 days at 200g per day)&amp;lt;/p&amp;gt;

&amp;lt;ul&amp;gt;
  &amp;lt;li&amp;gt;Dried banana: 100g &amp;amp;gt; 300 cal&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Raisin: 200g &amp;amp;gt; 600 cal&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Pumpkin seeds: 50g &amp;amp;gt; 310 cal&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Cajou nut: 100g &amp;amp;gt; 630 cal&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Dates: 150g &amp;amp;gt; 525 cal&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Almonds: 80g &amp;amp;gt; 530 cal&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Peanuts (unsalted): 120g &amp;amp;gt; 770 cal&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

&amp;lt;p&amp;gt;Total calories: 3,665 calories (approx. 460 cal/100g)&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Notes:&amp;lt;/p&amp;gt;
&amp;lt;ul&amp;gt;
  &amp;lt;li&amp;gt;Peanuts have the best calories/weight ratio but I get bored of them pretty quickly so I donâ€™t put that much in this mix.&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Fruits are great but they roughly have half the calories per weight as nuts.&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;On multi-day hikes, I take 200g per day of this mix, plus 2 snack bars for each day (small Snickers bars, Cliff, Kind or Kind Fruit bars).&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

&amp;lt;h1 id=&amp;quot;other-meals&amp;quot;&amp;gt;other meals&amp;lt;/h1&amp;gt;

&amp;lt;p&amp;gt;While weâ€™re talking about trail food, here is what I take for the other meals:&amp;lt;/p&amp;gt;

&amp;lt;ul&amp;gt;
  &amp;lt;li&amp;gt;For breakfast, I mix 50g of oatmeal with 35g of hot chocolate powder and 60g of muesli. I soak it in water for 1/2hr and that gives me 540 calories for a weight of 145g.&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;For lunch and diner, I used to have couscous (cold soaked) and 2 small dry sausages for 520 calories and 140g or cold soaked mashed potatoes and 2 slices of dried bacon for 620 cal and 185g. Now that Iâ€™m vegetarian, Iâ€™m going to have to find something to replace the sausages and bacon.&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

&amp;lt;p&amp;gt;In total, it is around 2,500 cal and 700g per day of food (not counting the few snack bars).&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;As I quickly get bored with eating the same thing every day, I tend to eat less each day on the trail, so I think from now on, Iâ€™ll go with 600g per day. I have reserves if you see what I mean and itâ€™s not over 4 to 8 days of hiking that Iâ€™m going to develop health problems if I donâ€™t eat enough calories per day. On a long thru-hike I would do differently of course.&amp;lt;/p&amp;gt;

&amp;lt;h1 id=&amp;quot;cold-soak-vs-warm-food&amp;quot;&amp;gt;cold-soak vs warm food&amp;lt;/h1&amp;gt;

&amp;lt;p&amp;gt;When I have to carry food on my back, I prefer to take less weight so I donâ€™t take a stove or cooking utensils. I only take food that I can cold-soak in water (dry mashed potatoes, couscous or ramen). To prepare it, I have a used ice-cream container with a screwed lid. Just put the food, add water, shake well and let it soak for half an hour.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;If Iâ€™m on a canoe or a motorcycle, then things are different, I take my little gas stove and I enjoy warm food (mostly pasta and ramen).&amp;lt;/p&amp;gt;

        Sat, 18 May 2019 00:00:00 +0000
        https://ldom.net/my-trail-recipes/
        https://ldom.net/my-trail-recipes/
        
        
      
    
      
        Why I cancelled my Amazon Prime subscription
        &amp;lt;p&amp;gt;We all know the Amazon marketplace and its features. Itâ€™s a fantastic machine for selling products online, probably the best in the world.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;One-click shopping, wish lists, save for later, the infinite selection of products and vendors, the lowest prices for most products, etc. With Prime you get all of this, plus free shipping on almost every item.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;This is partially the reason why I cancelled my Prime subscription and why Iâ€™m not buying anymore from Amazon and moving my stuff off of AWS.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;selfish reason: less shit you donâ€™t need&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;By not buying anymore from them, I buy a lot &amp;lt;strong&amp;gt;less stuff that I donâ€™t really need&amp;lt;/strong&amp;gt;. This is better for my budgetâ€¦&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;a sea of small packages delivered by an uber-ized workforce&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Then, Iâ€™m trying to &amp;lt;strong&amp;gt;buy less from online sources&amp;lt;/strong&amp;gt;. Buying online is great and convenient, but itâ€™s not really good for the planet to have all these small packets shipped in all directions. Itâ€™s also not good for the local shops. Whatâ€™s also infuriating is how their delivery process has been partially shifted to uber-ized people, using their personal car, carelessly dropping packets in front of the doors and paid for each item delivered. This form of employment is basically a return to 19th century practices, with the aid of 21th century technology. A shame.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;monopolies are bad&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Another reason is the &amp;lt;strong&amp;gt;dominant position of Amazon over online shopping&amp;lt;/strong&amp;gt;. Having such a big player killing all the competition is never good in the long run for consumers. There are already a lot of products that are difficult to find outside of Amazon.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;no social responsibility&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Finally thereâ€™s the &amp;lt;strong&amp;gt;appalling lack of social responsibility&amp;lt;/strong&amp;gt; of the company. From under-paying their employees, treating them like shit in fulfilment centres or even organizing this ridiculous global auction for HQ2. Why would you want to participate to this? If you want to know what social responsibility is, just look at what &amp;lt;a href=&amp;quot;https://www.patagonia.com/actionworks&amp;quot;&amp;gt;Patagonia&amp;lt;/a&amp;gt; does.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;gazillionaire&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Jeff Bezos got $24 billion richer during the pandemic. Any sense in being that rich, especially if you have no ideas about what to do with the money?&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;â€œThe only way that I can see to deploy this much financial resource is by converting my Amazon winnings into space travel. That is basically it.â€&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;How could you be so blind to not see the million ways these resources could be used in a better way than burning rocket fuel?&amp;lt;/p&amp;gt;

        Thu, 16 May 2019 00:00:00 +0000
        https://ldom.net/why-i-cancelled-my-prime/
        https://ldom.net/why-i-cancelled-my-prime/
        
        
      
    
      
        How to use a CI (CodeShip) to deploy a theme that won&#39;t build on Github pages
        &amp;lt;p&amp;gt;Github pages is a nice and free way to host a web site with static pages. It also supports &amp;lt;a href=&amp;quot;https://jekyllrb.com/&amp;quot;&amp;gt;Jekyll&amp;lt;/a&amp;gt; themes, which is great when you want to make things easier to edit and post.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Github pages has a bunch of themes ready to be used and they also support any Jekyll theme hosted on a public repository on github.com. You just have to use &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;remote_theme&amp;lt;/code&amp;gt; instead of &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;theme&amp;lt;/code&amp;gt; in the &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;__config.yml&amp;lt;/code&amp;gt; file.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;However, sometimes the theme that you have chosen builds without errors locally but doesnâ€™t build when Github tries to do it. And then the error message is everything but helpful.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Locally you get this:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;bundle &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;exec &amp;lt;/span&amp;gt;jekyll doctor &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--config&amp;lt;/span&amp;gt; _config.yml
Configuration file: _config.yml
  Your &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;test &amp;lt;/span&amp;gt;results are &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;in&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt; Everything looks fine.&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;And when Github builds it, you get this:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;The page build failed &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;for &amp;lt;/span&amp;gt;the master branch with the following error:

Page build failed. For more information, see https://help.github.com/en/articles/troubleshooting-github-pages-builds.&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;As you can see &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;Page build failed.&amp;lt;/code&amp;gt; is not very useful. After hours trying to find the potential errors that they mention in the troubleshooting page, I gave up and went for a different solution.&amp;lt;/p&amp;gt;

&amp;lt;!--more--&amp;gt;

&amp;lt;p&amp;gt;The solution is to use a second repository (in my case: &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;ldom-src&amp;lt;/code&amp;gt;) to host the source files with the theme. These are the files you were putting on the original repository for the github pages (in my case: &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;ldom&amp;lt;/code&amp;gt;). Then setup a CI server (Continuous Integration) to build the static files every time you push to the &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;-src&amp;lt;/code&amp;gt; repository and push the static file to the github pages repository.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Of course, you can put together the CI server yourself, using Jenkins for example, but itâ€™s easier when you donâ€™t have to manage a server for that. CodeShip is a CI service (I have no affiliation with them) that offers a free account limited to 100 builds per month (which is plenty for a personal site that youâ€™ll update 30 times max per month).&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Here is how you set it up and the scripts to use:&amp;lt;/p&amp;gt;

&amp;lt;ol&amp;gt;
  &amp;lt;li&amp;gt;Go to &amp;lt;a href=&amp;quot;https://codeship.com&amp;quot;&amp;gt;https://codeship.com&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Sign up for the free tier.&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Create a new project.&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;

&amp;lt;p&amp;gt;In the Setup Commands tab, select â€œI want to create my own custom commandsâ€ and use:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;&amp;lt;table class=&amp;quot;rouge-table&amp;quot;&amp;gt;&amp;lt;tbody&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;td class=&amp;quot;gutter gl&amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;lineno&amp;quot;&amp;gt;1
2
&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td class=&amp;quot;code&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;bundle &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;install
&amp;lt;/span&amp;gt;bundle &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;exec &amp;lt;/span&amp;gt;jekyll build &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--config&amp;lt;/span&amp;gt; _config.yml
&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&amp;lt;/tbody&amp;gt;&amp;lt;/table&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;In the Setup Commands text area, use:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-shell&amp;quot; data-lang=&amp;quot;shell&amp;quot;&amp;gt;&amp;lt;table class=&amp;quot;rouge-table&amp;quot;&amp;gt;&amp;lt;tbody&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;td class=&amp;quot;gutter gl&amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;lineno&amp;quot;&amp;gt;1
2
3
4
5
6
7
8
9
10
11
12
&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td class=&amp;quot;code&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;REMOTE_REPOSITORY&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;${&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;REMOTE_REPOSITORY&amp;lt;/span&amp;gt;:?&amp;lt;span class=&amp;quot;s1&amp;quot;&amp;gt;&#39;You need to configure the REMOTE_REPOSITORY environment variable!&#39;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;REMOTE_BRANCH&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;${&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;REMOTE_BRANCH&amp;lt;/span&amp;gt;:?&amp;lt;span class=&amp;quot;s1&amp;quot;&amp;gt;&#39;You need to configure the REMOTE_BRANCH environment variable!&#39;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;set&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;-e&amp;lt;/span&amp;gt;
git config &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--global&amp;lt;/span&amp;gt; user.email &amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;&amp;amp;lt;your email&amp;amp;gt;&amp;quot;&amp;lt;/span&amp;gt;
git config &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--global&amp;lt;/span&amp;gt; user.name &amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;&amp;amp;lt;your name&amp;amp;gt; (codeship)&amp;quot;&amp;lt;/span&amp;gt;
git clone &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;${&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;REMOTE_REPOSITORY&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;}&amp;lt;/span&amp;gt; _tmp &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;-b&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;${&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;REMOTE_BRANCH&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;cp&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;-R&amp;lt;/span&amp;gt; _site/&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;*&amp;lt;/span&amp;gt; _tmp/
&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;cd &amp;lt;/span&amp;gt;_tmp
git add &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;
git status
git commit &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;-m&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;new build&amp;quot;&amp;lt;/span&amp;gt;
git push origin master
&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&amp;lt;/tbody&amp;gt;&amp;lt;/table&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;In the Environment tab, create 2 environment variables (to be used in the script above):&amp;lt;/p&amp;gt;
&amp;lt;ul&amp;gt;
  &amp;lt;li&amp;gt;&amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;REMOTE_REPOSITORY&amp;lt;/code&amp;gt;: put the address of the destination repository, the one for the static Github pages, eg. &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;git@github.com:ldom/ldom.git&amp;lt;/code&amp;gt;&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;&amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;REMOTE_BRANCH&amp;lt;/code&amp;gt;: put &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;master&amp;lt;/code&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

&amp;lt;ol&amp;gt;
  &amp;lt;li&amp;gt;The last step is to configure CodeShip and Github to allow the deploy script to push (write) to the destination repository.&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;

&amp;lt;p&amp;gt;This is described on this page: &amp;lt;a href=&amp;quot;https://documentation.codeship.com/basic/builds-and-configuration/access-to-other-repositories/#sts=The%20Machine%20User%20Solution&amp;quot;&amp;gt;https://documentation.codeship.com/basic/builds-and-configuration/access-to-other-repositories/#sts=The%20Machine%20User%20Solution&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;I recommend using the â€œMachine Userâ€ solution. 
It involves:&amp;lt;/p&amp;gt;
&amp;lt;ul&amp;gt;
  &amp;lt;li&amp;gt;creating a new github.com user and&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;give it access to the destination repository (by inviting it as a collaborator in the destination repository),&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;then you have to remove the key from the Deploy section under the destination repository (not your user settings, but the repository settings).&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;At last, you need to put that key (that has to be copied from General tab of the Project Settings in CodeShip) as a new key on the â€œMachine Userâ€ github account. (Note that if you donâ€™t remove it first from the Deploy settings of the destination repository, you wonâ€™t be able to add that key to the â€œMachine Userâ€ keys).&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

&amp;lt;p&amp;gt;Once all of this is done, youâ€™ll enjoy a full automated (and free) system where you just have to push to the &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;-src&amp;lt;/code&amp;gt; repository for everything to be built and deployed to Github pages!&amp;lt;/p&amp;gt;

        Fri, 10 May 2019 00:00:00 +0000
        https://ldom.net/ci-for-github-pages/
        https://ldom.net/ci-for-github-pages/">
  <meta property="og:locale" content="en_EN">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://ldom.net/feed.xml">
  <meta property="og:site_name" content="Ldom.net">
  
  

  
    <!-- More â€º https://dev.twitter.com/cards/overview -->
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="ldom">
<meta name="twitter:creator" content="ldom">
<meta name="twitter:title" content="RSS Feed">
<meta name="twitter:description" content="Ldom.net â€“ 
    
    https://ldom.net/
    
    Tue, 09 Jun 2020 21:45:01 +0000
    Tue, 09 Jun 2020 21:45:01 +0000
    Jekyll v4.1.0
    
      
        Create Multi-Region Topics Programmatically With Python and confluent-kafka-python
        &amp;lt;p&amp;gt;Confluent Platform 5.4 introduced Multi-Region Clusters (MRC). MRC adds numerous cool features such as Follower-Fetching or asynchronous Observers.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;This article explains how to create topics with replicas and observers programmatically using python.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;More details on MRC clusters: &amp;lt;a href=&amp;quot;https://docs.confluent.io/current/multi-dc-deployments/multi-region.html&amp;quot;&amp;gt;https://docs.confluent.io/current/multi-dc-deployments/multi-region.html&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;!--more--&amp;gt;

&amp;lt;p&amp;gt;To create a topic with replicas and (asynchronous) observers, you have to pass replica and observers placement details in the form of a JSON object.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Here is an example using the command-line:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;cat &amp;lt;/span&amp;gt;placement.json
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;version&amp;quot;&amp;lt;/span&amp;gt;:1,&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;replicas&amp;quot;&amp;lt;/span&amp;gt;:[&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;count&amp;quot;&amp;lt;/span&amp;gt;:2,&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;constraints&amp;quot;&amp;lt;/span&amp;gt;:&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;rack&amp;quot;&amp;lt;/span&amp;gt;:&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;east&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;}}]&amp;lt;/span&amp;gt;,&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;observers&amp;quot;&amp;lt;/span&amp;gt;:[&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;count&amp;quot;&amp;lt;/span&amp;gt;:1,&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;constraints&amp;quot;&amp;lt;/span&amp;gt;:&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;rack&amp;quot;&amp;lt;/span&amp;gt;:&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;west&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;}}]}&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;err&amp;quot;&amp;gt;$&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;kafka-topics  &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--create&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--bootstrap-server&amp;lt;/span&amp;gt; &amp;amp;lt;IP address&amp;amp;gt;:9092 &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--topic&amp;lt;/span&amp;gt; test2 &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--partitions&amp;lt;/span&amp;gt; 5 &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--replica-placement&amp;lt;/span&amp;gt; placement.json
&amp;lt;span class=&amp;quot;err&amp;quot;&amp;gt;$&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;kafka-topics &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--zookeeper&amp;lt;/span&amp;gt; &amp;amp;lt;IP address&amp;amp;gt;:2181 &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--describe&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--topic&amp;lt;/span&amp;gt; test2

Topic: test2	PartitionCount: 5	ReplicationFactor: 3	Configs: confluent.placement.constraints&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;={&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;version&amp;quot;&amp;lt;/span&amp;gt;:1,&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;replicas&amp;quot;&amp;lt;/span&amp;gt;:[&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;count&amp;quot;&amp;lt;/span&amp;gt;:2,&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;constraints&amp;quot;&amp;lt;/span&amp;gt;:&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;rack&amp;quot;&amp;lt;/span&amp;gt;:&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;east&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;}}]&amp;lt;/span&amp;gt;,&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;observers&amp;quot;&amp;lt;/span&amp;gt;:[&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;count&amp;quot;&amp;lt;/span&amp;gt;:1,&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;constraints&amp;quot;&amp;lt;/span&amp;gt;:&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;rack&amp;quot;&amp;lt;/span&amp;gt;:&amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;west&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;}}]}&amp;lt;/span&amp;gt;
	Topic: test2	Partition: 0	Leader: 2	Replicas: 2,3,4	Isr: 2,3	Offline:
	Topic: test2	Partition: 1	Leader: 3	Replicas: 3,1,5	Isr: 3,1	Offline:
	Topic: test2	Partition: 2	Leader: 1	Replicas: 1,2,4	Isr: 1,2	Offline:
	Topic: test2	Partition: 3	Leader: 2	Replicas: 2,1,5	Isr: 2,1	Offline:
	Topic: test2	Partition: 4	Leader: 3	Replicas: 3,2,4	Isr: 3,2	Offline:&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;To do the same programmatically with python, you have to use the &amp;lt;a href=&amp;quot;https://docs.confluent.io/current/clients/confluent-kafka-python/&amp;quot;&amp;gt;confluent-kafka-python&amp;lt;/a&amp;gt; python library.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Specific to MRC is that you have to pass a config dict with &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;confluent.placement.constraints&amp;lt;/code&amp;gt; instead of the &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;replication_factor&amp;lt;/code&amp;gt; argument. See line 5 below.&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-python&amp;quot; data-lang=&amp;quot;python&amp;quot;&amp;gt;&amp;lt;table class=&amp;quot;rouge-table&amp;quot;&amp;gt;&amp;lt;tbody&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;td class=&amp;quot;gutter gl&amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;lineno&amp;quot;&amp;gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td class=&amp;quot;code&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;span class=&amp;quot;kn&amp;quot;&amp;gt;from&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nn&amp;quot;&amp;gt;confluent_kafka.admin&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;kn&amp;quot;&amp;gt;import&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;AdminClient&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;NewTopic&amp;lt;/span&amp;gt;

&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;placement&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;&amp;quot;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;version&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:1,&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;replicas&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:[{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;count&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:2,&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;constraints&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;rack&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;east&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;}}],&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;observers&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:[{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;count&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:1,&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;constraints&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;rack&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;west&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;se&amp;quot;&amp;gt;\&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;}}]}&amp;quot;&amp;lt;/span&amp;gt;

&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;new_topic&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;[&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;NewTopic&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;&amp;quot;test1&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;num_partitions&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;mi&amp;quot;&amp;gt;5&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;config&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;{&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;&#39;confluent.placement.constraints&#39;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;placement&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;})]&amp;lt;/span&amp;gt;

&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;a&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;AdminClient&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;({&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;&#39;bootstrap.servers&#39;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;&#39;&amp;amp;lt;IP address&amp;amp;gt;:9092&#39;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;})&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;res&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;a&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;create_topics&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;new_topic&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;

&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;for&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;topic&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;f&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;ow&amp;quot;&amp;gt;in&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;res&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;items&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;():&amp;lt;/span&amp;gt;
    &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;try&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;
        &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;f&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;result&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;()&amp;lt;/span&amp;gt;
        &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;print&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;&amp;quot;Topic {} created&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;format&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;topic&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;))&amp;lt;/span&amp;gt;
    &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;except&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;Exception&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;as&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;e&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;:&amp;lt;/span&amp;gt;
        &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;print&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;s&amp;quot;&amp;gt;&amp;quot;Failed to create topic {}: {}&amp;quot;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;format&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;topic&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;,&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;n&amp;quot;&amp;gt;e&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;p&amp;quot;&amp;gt;))&amp;lt;/span&amp;gt;
&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&amp;lt;/tbody&amp;gt;&amp;lt;/table&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;Thatâ€™s it!&amp;lt;/p&amp;gt;

        Mon, 18 May 2020 00:00:00 +0000
        https://ldom.net/create-mrc-topics-programmatically-with-python/
        https://ldom.net/create-mrc-topics-programmatically-with-python/
        
        
      
    
      
        Switch Between Apache Kafka and Confluent Versions with Homebrew
        &amp;lt;p&amp;gt;Once youâ€™ve installed Apache Kafka and the Confluent Platform using &amp;lt;a href=&amp;quot;https://brew.sh&amp;quot;&amp;gt;Homebrew&amp;lt;/a&amp;gt;, there are many ways to maintain multiple versions of the package on your local computer.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;(This is kinda part 2 of &amp;lt;a href=&amp;quot;/homebrew-confluent-platform/&amp;quot;&amp;gt;Install and Configure Apache Kafka and the Confluent Platform using Homebrew&amp;lt;/a&amp;gt;.)&amp;lt;/p&amp;gt;

&amp;lt;!--more--&amp;gt;

&amp;lt;p&amp;gt;To switch from a version to another with Homebrew (here: 5.3.1), simply do:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;brew switch confluent-platform 5.3.1&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;This is great but it relies on the fact that the version you want to switch to is currently installed locally in your cellar. If itâ€™s the case, Homebrew does the switch instantly by updating symlinks.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;There are several ways to ensure that you have all the versions that you want in your local computer. At some point, they will collide with the fact that Homebrew does a cleanup every 30 days or each time you run an upgrade, unless you the &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;HOMEBREW_NO_INSTALL_CLEANUP&amp;lt;/code&amp;gt; envvar.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;You can:&amp;lt;/p&amp;gt;

&amp;lt;ol&amp;gt;
  &amp;lt;li&amp;gt;
    &amp;lt;p&amp;gt;Use &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;HOMEBREW_NO_INSTALL_CLEANUP&amp;lt;/code&amp;gt; when upgrading all Homebrew packages to keep the previous versions on your disk. Unless it is set, &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;brew cleanup&amp;lt;/code&amp;gt; will be run for the formula that youâ€™re upgrading or, every 30 days, for all formulae. It will fill your disk quite quickly if you use a lot of packages and unless youâ€™re super careful, youâ€™ll loose your previous versions sooner or later.&amp;lt;/p&amp;gt;
  &amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;
    &amp;lt;p&amp;gt;Build you own keg and feed it with the versions that you want to keep using &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;brew extract&amp;lt;/code&amp;gt;. Too much work IMHO.&amp;lt;/p&amp;gt;
  &amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;
    &amp;lt;p&amp;gt;Use &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;HOMEBREW_NO_INSTALL_CLEANUP&amp;lt;/code&amp;gt; when upgrading &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;confluent-platform&amp;lt;/code&amp;gt;. If the version you want is gone, restore it using &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;brew install&amp;lt;/code&amp;gt; referencing the &amp;lt;b&amp;gt;specific commit number&amp;lt;/b&amp;gt;. (Also remember to backup the Confluent/Kafka config files in a folder outside of Homebrew.)&amp;lt;/p&amp;gt;
  &amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;

&amp;lt;p&amp;gt;In this article, Iâ€™m describing Option 3.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Reference points:&amp;lt;/p&amp;gt;

&amp;lt;ul&amp;gt;
  &amp;lt;li&amp;gt;&amp;lt;a href=&amp;quot;https://formulae.brew.sh/formula/confluent-platform&amp;quot;&amp;gt;https://formulae.brew.sh/formula/confluent-platform&amp;lt;/a&amp;gt; â€“&amp;amp;gt; page for the formula in Homebrew&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;&amp;lt;a href=&amp;quot;https://github.com/Homebrew/homebrew-core/blob/master/Formula/confluent-platform.rb&amp;quot;&amp;gt;https://github.com/Homebrew/homebrew-core/blob/master/Formula/confluent-platform.rb&amp;lt;/a&amp;gt; â€“&amp;amp;gt; location of the formula for the Confluent Platform in the repo&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;&amp;lt;a href=&amp;quot;https://github.com/Homebrew/homebrew-core/commits/master/Formula/confluent-platform.rb&amp;quot;&amp;gt;https://github.com/Homebrew/homebrew-core/commits/master/Formula/confluent-platform.rb&amp;lt;/a&amp;gt; â€“&amp;amp;gt; commit history of the formula&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

&amp;lt;h1 id=&amp;quot;first-install&amp;quot;&amp;gt;First Install&amp;lt;/h1&amp;gt;

&amp;lt;p&amp;gt;To install for the first time, run:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;brew &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;install &amp;lt;/span&amp;gt;confluent-platform&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;h1 id=&amp;quot;upgrades&amp;quot;&amp;gt;Upgrades&amp;lt;/h1&amp;gt;

&amp;lt;p&amp;gt;To upgrade without removing the previous versions, run:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;~ &amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ HOMEBREW_NO_INSTALL_CLEANUP&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt;1 brew upgrade confluent-platform
Updating Homebrew...
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; Auto-updated Homebrew!
Updated 1 tap &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;homebrew/core&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; Updated Formulae
.../...

&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; Upgrading 1 outdated package:
confluent-platform 5.3.1 -&amp;amp;gt; 5.4.0
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; Upgrading confluent-platform
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; Downloading https://packages.confluent.io/archive/5.4/confluent-5.4.0-2.12.tar.gz
&amp;lt;span class=&amp;quot;c&amp;quot;&amp;gt;######################################################################## 100.0%&amp;lt;/span&amp;gt;
ðŸº  /usr/local/Cellar/confluent-platform/5.4.0: 2,943 files, 951.4MB, built &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;in &amp;lt;/span&amp;gt;85 minutes 52 seconds
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; Checking &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;for &amp;lt;/span&amp;gt;dependents of upgraded formulae...
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; No dependents found!&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;(To set the option permanently and for all the Homebrew packages, you can add &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;export HOMEBREW_NO_INSTALL_CLEANUP=1&amp;lt;/code&amp;gt; to your bash profile but I donâ€™t recommend it.)&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;To check what you have locally (in this example, see line 7 and 9, I have 5.3.1 and 5.4.0):&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;&amp;lt;table class=&amp;quot;rouge-table&amp;quot;&amp;gt;&amp;lt;tbody&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;td class=&amp;quot;gutter gl&amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;lineno&amp;quot;&amp;gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td class=&amp;quot;code&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;~ &amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;brew info confluent-platform
confluent-platform: stable 5.4.0
Developer-optimized distribution of Apache Kafka
https://www.confluent.io/product/confluent-platform/
Conflicts with:
 kafka &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;because kafka also ships with identically named Kafka related executables&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;
/usr/local/Cellar/confluent-platform/5.3.1 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;2,499 files, 827.2MB&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;
 Built from &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;source &amp;lt;/span&amp;gt;on 2020-02-26 at 14:22:54
/usr/local/Cellar/confluent-platform/5.4.0 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;2,943 files, 951.4MB&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;*&amp;lt;/span&amp;gt;
 Built from &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;source &amp;lt;/span&amp;gt;on 2020-02-28 at 08:08:33
From: https://github.com/Homebrew/homebrew-core/blob/master/Formula/confluent-platform.rb
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; Requirements
Required: java &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt; 1.8 âœ”
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;==&amp;amp;gt;&amp;lt;/span&amp;gt; Analytics
&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;install&amp;lt;/span&amp;gt;: 317 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;30 days&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;, 572 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;90 days&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;, 1,593 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;365 days&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;
install-on-request: 316 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;30 days&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;, 570 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;90 days&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;, 1,578 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;365 days&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;
build-error: 0 &amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;(&amp;lt;/span&amp;gt;30 days&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt;
&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&amp;lt;/tbody&amp;gt;&amp;lt;/table&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;You can also check what on the disk:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;~ &amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;ls&amp;lt;/span&amp;gt; /usr/local/Cellar/confluent-platform/
5.3.1	5.4.0&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;h1 id=&amp;quot;re-install-of-a-previous-version&amp;quot;&amp;gt;Re-install of a Previous Version&amp;lt;/h1&amp;gt;

&amp;lt;p&amp;gt;If you want to re-install a previous version:&amp;lt;/p&amp;gt;

&amp;lt;ol&amp;gt;
  &amp;lt;li&amp;gt;Get the commit number at &amp;lt;a href=&amp;quot;https://github.com/Homebrew/homebrew-core/commits/master/Formula/confluent-platform.rb&amp;quot;&amp;gt;https://github.com/Homebrew/homebrew-core/commits/master/Formula/confluent-platform.rb&amp;lt;/a&amp;gt;. If it says â€œthis commit history is taking too long to generateâ€, then clone &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;homebrew-core&amp;lt;/code&amp;gt; and check the commits there with &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;git log master -- Formula/confluent-platform.rb&amp;lt;/code&amp;gt;.&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;

&amp;lt;p&amp;gt;From the above page, you can get the commit numbers of the previous versions. For your convenience, I am listing here some of the recent ones:&amp;lt;/p&amp;gt;

&amp;lt;ul&amp;gt;
  &amp;lt;li&amp;gt;5.4.1  â‡¢ &amp;lt;a href=&amp;quot;https://raw.githubusercontent.com/Homebrew/homebrew-core/0a3b63e6acbc3257b804aa229900e7aed46b71b8/Formula/confluent-platform.rb&amp;quot;&amp;gt;https://raw.githubusercontent.com/Homebrew/homebrew-core/0a3b63e6acbc3257b804aa229900e7aed46b71b8/Formula/confluent-platform.rb&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;5.4.0  â‡¢ &amp;lt;a href=&amp;quot;https://raw.githubusercontent.com/Homebrew/homebrew-core/2e229452f5cb591391e6b3f649378ae6d9a1bd1f/Formula/confluent-platform.rb&amp;quot;&amp;gt;https://raw.githubusercontent.com/Homebrew/homebrew-core/2e229452f5cb591391e6b3f649378ae6d9a1bd1f/Formula/confluent-platform.rb&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;5.3.1  â‡¢ &amp;lt;a href=&amp;quot;https://raw.githubusercontent.com/Homebrew/homebrew-core/1135feef30ba254f692bbeb9afea097b395f3634/Formula/confluent-platform.rb&amp;quot;&amp;gt;https://raw.githubusercontent.com/Homebrew/homebrew-core/1135feef30ba254f692bbeb9afea097b395f3634/Formula/confluent-platform.rb&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;5.3.0  â‡¢ &amp;lt;a href=&amp;quot;https://raw.githubusercontent.com/Homebrew/homebrew-core/6a76b682ff4969afec52cc34be58315cee3271fe/Formula/confluent-platform.rb&amp;quot;&amp;gt;https://raw.githubusercontent.com/Homebrew/homebrew-core/6a76b682ff4969afec52cc34be58315cee3271fe/Formula/confluent-platform.rb&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

&amp;lt;p&amp;gt;For prior versions, itâ€™s a little more complicated as the formula was named &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;confluent-oss&amp;lt;/code&amp;gt; before.&amp;lt;/p&amp;gt;

&amp;lt;ol&amp;gt;
  &amp;lt;li&amp;gt;Reference the commit number in the install command, for example to install 5.3.0:&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;brew &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;install &amp;lt;/span&amp;gt;https://raw.githubusercontent.com/Homebrew/homebrew-core/6a76b682ff4969afec52cc34be58315cee3271fe/Formula/confluent-platform.rb&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;Now, check what you have (see above) and go crazy switching versions:&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;One last thing:&amp;lt;/p&amp;gt;
&amp;lt;ul&amp;gt;
  &amp;lt;li&amp;gt;Donâ€™t forget to &amp;lt;b&amp;gt;stop running instances&amp;lt;/b&amp;gt; before upgrade/switch operations. (Ctrl-C on your terminalsâ€¦)&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;To fully &amp;lt;b&amp;gt;reset your data&amp;lt;/b&amp;gt; (delete your topics and log files) between version switches, find where the topics are stored (check the &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;log.dirs&amp;lt;/code&amp;gt; config property, by default itâ€™s in &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;/tmp/kafka-logs&amp;lt;/code&amp;gt;):&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;rm&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;-rf&amp;lt;/span&amp;gt; /tmp/kafka-logs
&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;rm&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;-rf&amp;lt;/span&amp;gt; /var/log/kafka/&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;*&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;Thatâ€™s all, folks!&amp;lt;/p&amp;gt;

        Thu, 27 Feb 2020 00:00:00 +0000
        https://ldom.net/homebrew-switch-confluent-versions/
        https://ldom.net/homebrew-switch-confluent-versions/
        
        
      
    
      
        Install and Configure Apache Kafka and the Confluent Platform using Homebrew 
        &amp;lt;p&amp;gt;If youâ€™re on a Mac, among the many ways to install Apache Kafka and the Confluent Platform, there is &amp;lt;a href=&amp;quot;https://brew.sh&amp;quot;&amp;gt;Homebrew&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;The Confluent Platform is available there and installing it is as easy as &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;brew install confluent-platform&amp;lt;/code&amp;gt;.&amp;lt;/p&amp;gt;

&amp;lt;!--more--&amp;gt;

&amp;lt;p&amp;gt;Unfortunately, once youâ€™ve run that command, all the Confluent components are installed on your machine but itâ€™s not ready to start and thereâ€™s not much documentation to help you.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;The main advantages with using Homebrew to manage your Confluent packages is that you can have multiple versions of Confluent/Kafka installed and easily switch between them and &amp;lt;b&amp;gt;it uses a lot less resources than Docker&amp;lt;/b&amp;gt;.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Because of my &amp;lt;a href=&amp;quot;/work/&amp;quot;&amp;gt;work&amp;lt;/a&amp;gt;, I constantly have to alter my Kafka setup and try new things, so in this article, Iâ€™ll focus on starting and configuring things manually.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;To install, run:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;brew &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;install &amp;lt;/span&amp;gt;confluent-platform&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;Once this is done, your install is not fully functional. You also have to create the appropriate &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;/var/log&amp;lt;/code&amp;gt; folder:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;sudo mkdir&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;-p&amp;lt;/span&amp;gt; /var/log/kafka
&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;sudo chown&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;-R&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;si&amp;quot;&amp;gt;$(&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;whoami&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;si&amp;quot;&amp;gt;)&amp;lt;/span&amp;gt; /var/log/kafka&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;Then youâ€™re ready to start a zookeeper and a broker.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;If you want to modify the configuration first, edit those files:&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;For zookeeper: &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;/usr/local/etc/kafka/zookeeper.properties&amp;lt;/code&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;For the broker: &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;/usr/local/etc/kafka/server.properties&amp;lt;/code&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;For connect: &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;/usr/local/etc/kafka/connect-distributed.properties&amp;lt;/code&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Note that &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;/usr/local/etc/kafka&amp;lt;/code&amp;gt; points to &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;/usr/local/Cellar/confluent-platform/5.3.1/etc/kafka/&amp;lt;/code&amp;gt; if youâ€™re using 5.3.1.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;When youâ€™re happy with the config files, open up a bunch of &amp;lt;a href=&amp;quot;https://iterm2.com/&amp;quot;&amp;gt;terminal windows&amp;lt;/a&amp;gt; and run the various components:&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;First, zookeeper:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;zookeeper-server-start /usr/local/etc/kafka/zookeeper.properties&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;Then a broker:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;kafka-server-start /usr/local/etc/kafka/server.properties&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;For a Connect in distributed mode:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;connect-distributed /usr/local/etc/kafka/connect-distributed.properties&amp;lt;span class=&amp;quot;sb&amp;quot;&amp;gt;`&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;Of course, in addition to the above, all the tools of the platform are installed:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;ls&amp;lt;/span&amp;gt; /usr/local/Cellar/confluent-platform/5.3.1/bin/
confluent-hub				kafka-api-start				kafka-mqtt-run-class			kafka-streams-application-reset		schema-registry-start
confluent-rebalancer			kafka-avro-console-consumer		kafka-mqtt-start			kafka-topics				schema-registry-stop
connect-distributed			kafka-avro-console-producer		kafka-mqtt-stop				kafka-verifiable-consumer		schema-registry-stop-service
connect-standalone			kafka-broker-api-versions		kafka-preferred-replica-election	kafka-verifiable-producer		security-plugins-run-class
control-center-3_0_0-reset		kafka-configs				kafka-producer-perf-test		ksql					sr-acl-cli
control-center-3_0_1-reset		kafka-console-consumer			kafka-reassign-partitions		ksql-datagen				stub-api-run-class
control-center-console-consumer		kafka-console-producer			kafka-replica-verification		ksql-print-metrics			stub-api-start
control-center-export			kafka-consumer-groups			kafka-rest-run-class			ksql-run-class				support-metrics-bundle
control-center-reset			kafka-consumer-perf-test		kafka-rest-start			ksql-server-start			zookeeper-security-migration
control-center-run-class		kafka-delegation-tokens			kafka-rest-stop				ksql-server-stop			zookeeper-server-start
control-center-set-acls			kafka-delete-records			kafka-rest-stop-service			ksql-stop				zookeeper-server-stop
control-center-start			kafka-dump-log				kafka-run-class				ksql-test-runner			zookeeper-shell
control-center-stop			kafka-log-dirs				kafka-server-start			replicator
kafka-acls				kafka-mirror-maker			kafka-server-stop			schema-registry-run-class&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;You can use them locally, for example:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;kafka-topics &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--zookeeper&amp;lt;/span&amp;gt; localhost:2181 &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--list&amp;lt;/span&amp;gt;
__confluent.support.metrics
__consumer_offsets
connect-configs
connect-offsets
connect-status
file_source
laurent
~ &amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;kafka-console-producer &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--broker-list&amp;lt;/span&amp;gt; localhost:9092 &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--topic&amp;lt;/span&amp;gt; laurent
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;one more line
&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;&amp;amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;err&amp;quot;&amp;gt;$&amp;lt;/span&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;If you want more than one zookeeper and one broker (which is enough for many local development tasks or configuration tests), you have to duplicate the configuration files, alter them (at least, add a &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;broker-id&amp;lt;/code&amp;gt; into the broker config and point the brokers to separate &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;log.dirs&amp;lt;/code&amp;gt; folders) and run the above commands into additional terminal windows pointing to separate config files.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;&amp;lt;img src=&amp;quot;/images/tech/homebrew-confluent.png&amp;quot; alt=&amp;quot;iTerm galore&amp;quot; /&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;And, yes, youâ€™ll end up with many terminal windows, but who cares.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;See also: &amp;lt;a href=&amp;quot;/homebrew-switch-confluent-versions/&amp;quot;&amp;gt;Switch Between Confluent Versions with Homebrew&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;

        Thu, 27 Feb 2020 00:00:00 +0000
        https://ldom.net/homebrew-confluent-platform/
        https://ldom.net/homebrew-confluent-platform/
        
        
      
    
      
        Carl von Ossietzky
        &amp;lt;p&amp;gt;Musing on the Wikipedia, I came across &amp;lt;a href=&amp;quot;https://en.wikipedia.org/wiki/Carl_von_Ossietzky&amp;quot;&amp;gt;this page&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Carl von Ossietzky (1889 â€” 1938) was a German journalist and pacifist that exposed the clandestine German re-armament between WW1 and 2 and was convicted of espionage in 1931 for it.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;He received the 1935 Nobel Peace Prize and died of tuberculosis while imprisoned.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Iâ€™m not going to paraphrase the wiki article here, you should read it. Thereâ€™s a few things that I find eye-opening in the troubled era that we live in. If History does not repeat itself, at least modern corrupted powers find a lot of inspiration in their models from the past.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Was he the first whislteblower? Certainly not, but this is one more stone in the garden of those who said (or keep saying) â€œwe didnâ€™t knowâ€.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Another fact is that he wasnâ€™t an extremist. He wrote for a journal that rejected Communism, but found the Social Democrat too compromised. Are whislteblowers extremists? I donâ€™t think so.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Being released after a first stay in prison, he didnâ€™t back out and wrote: &amp;lt;cite&amp;gt;â€œâ€¦/â€¦German and Jewish are not fixed categories established once and for all in some mystic prehistoric age, but rather flexible concepts which change their content with spiritual and economic changes dependent on the general dynamics of history.â€&amp;lt;/cite&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;He finally added: &amp;lt;cite&amp;gt;â€œToday there is a strong smell of blood in the air. Literary anti-Semitism forges the moral weapon for murder. Sturdy and honest lads will take care of the restâ€.&amp;lt;/cite&amp;gt; A visionary description of how a general cultural/societal atmosphere helps set the tone for more radical actions.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;After Hilter got to power, he continued to speak out against the nazis and ended up arrested under â€œprotective custodyâ€.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;The â€œprotective custodyâ€ has always been a convenient concept for abusing power. To protect them from a danger you helped created, you put your opponents in prison. Itâ€™s like jailing black people because they could be hurt by white nationalists. (Letâ€™s not give ideas to the fake president.)&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;When Ossietzky was awarded the Nobel Peace Prize in 1935, Hermann GÃ¶ring strongly suggested he declines the prize, saying that accepting it would mean excluding himself from the German people. Another early version of the ubiquitous but very tired: â€œif youâ€™re against me, youâ€™re anti-patrioticâ€.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;At last, what is sad is that Germanyâ€™s Federal Court of Justice didnâ€™t clear his conviction in 1992, applying the law as it stood in 1931. At least he got a memorial statue in Pankow. Iâ€™ll try to bring flowers there next time Iâ€™m in Berlin.&amp;lt;/p&amp;gt;

        Tue, 10 Dec 2019 00:00:00 +0000
        https://ldom.net/carl-von-ossietzky/
        https://ldom.net/carl-von-ossietzky/
        
        
      
    
      
        My secret trail recipes
        &amp;lt;p&amp;gt;OK, maybe not so secret, and maybe not so original, but hereâ€™s the breakdown.&amp;lt;/p&amp;gt;

&amp;lt;h1 id=&amp;quot;trail-mix&amp;quot;&amp;gt;trail mix&amp;lt;/h1&amp;gt;

&amp;lt;p&amp;gt;For 800g of mix (4 days at 200g per day)&amp;lt;/p&amp;gt;

&amp;lt;ul&amp;gt;
  &amp;lt;li&amp;gt;Dried banana: 100g &amp;amp;gt; 300 cal&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Raisin: 200g &amp;amp;gt; 600 cal&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Pumpkin seeds: 50g &amp;amp;gt; 310 cal&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Cajou nut: 100g &amp;amp;gt; 630 cal&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Dates: 150g &amp;amp;gt; 525 cal&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Almonds: 80g &amp;amp;gt; 530 cal&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Peanuts (unsalted): 120g &amp;amp;gt; 770 cal&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

&amp;lt;p&amp;gt;Total calories: 3,665 calories (approx. 460 cal/100g)&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Notes:&amp;lt;/p&amp;gt;
&amp;lt;ul&amp;gt;
  &amp;lt;li&amp;gt;Peanuts have the best calories/weight ratio but I get bored of them pretty quickly so I donâ€™t put that much in this mix.&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Fruits are great but they roughly have half the calories per weight as nuts.&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;On multi-day hikes, I take 200g per day of this mix, plus 2 snack bars for each day (small Snickers bars, Cliff, Kind or Kind Fruit bars).&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

&amp;lt;h1 id=&amp;quot;other-meals&amp;quot;&amp;gt;other meals&amp;lt;/h1&amp;gt;

&amp;lt;p&amp;gt;While weâ€™re talking about trail food, here is what I take for the other meals:&amp;lt;/p&amp;gt;

&amp;lt;ul&amp;gt;
  &amp;lt;li&amp;gt;For breakfast, I mix 50g of oatmeal with 35g of hot chocolate powder and 60g of muesli. I soak it in water for 1/2hr and that gives me 540 calories for a weight of 145g.&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;For lunch and diner, I used to have couscous (cold soaked) and 2 small dry sausages for 520 calories and 140g or cold soaked mashed potatoes and 2 slices of dried bacon for 620 cal and 185g. Now that Iâ€™m vegetarian, Iâ€™m going to have to find something to replace the sausages and bacon.&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

&amp;lt;p&amp;gt;In total, it is around 2,500 cal and 700g per day of food (not counting the few snack bars).&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;As I quickly get bored with eating the same thing every day, I tend to eat less each day on the trail, so I think from now on, Iâ€™ll go with 600g per day. I have reserves if you see what I mean and itâ€™s not over 4 to 8 days of hiking that Iâ€™m going to develop health problems if I donâ€™t eat enough calories per day. On a long thru-hike I would do differently of course.&amp;lt;/p&amp;gt;

&amp;lt;h1 id=&amp;quot;cold-soak-vs-warm-food&amp;quot;&amp;gt;cold-soak vs warm food&amp;lt;/h1&amp;gt;

&amp;lt;p&amp;gt;When I have to carry food on my back, I prefer to take less weight so I donâ€™t take a stove or cooking utensils. I only take food that I can cold-soak in water (dry mashed potatoes, couscous or ramen). To prepare it, I have a used ice-cream container with a screwed lid. Just put the food, add water, shake well and let it soak for half an hour.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;If Iâ€™m on a canoe or a motorcycle, then things are different, I take my little gas stove and I enjoy warm food (mostly pasta and ramen).&amp;lt;/p&amp;gt;

        Sat, 18 May 2019 00:00:00 +0000
        https://ldom.net/my-trail-recipes/
        https://ldom.net/my-trail-recipes/
        
        
      
    
      
        Why I cancelled my Amazon Prime subscription
        &amp;lt;p&amp;gt;We all know the Amazon marketplace and its features. Itâ€™s a fantastic machine for selling products online, probably the best in the world.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;One-click shopping, wish lists, save for later, the infinite selection of products and vendors, the lowest prices for most products, etc. With Prime you get all of this, plus free shipping on almost every item.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;This is partially the reason why I cancelled my Prime subscription and why Iâ€™m not buying anymore from Amazon and moving my stuff off of AWS.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;selfish reason: less shit you donâ€™t need&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;By not buying anymore from them, I buy a lot &amp;lt;strong&amp;gt;less stuff that I donâ€™t really need&amp;lt;/strong&amp;gt;. This is better for my budgetâ€¦&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;a sea of small packages delivered by an uber-ized workforce&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Then, Iâ€™m trying to &amp;lt;strong&amp;gt;buy less from online sources&amp;lt;/strong&amp;gt;. Buying online is great and convenient, but itâ€™s not really good for the planet to have all these small packets shipped in all directions. Itâ€™s also not good for the local shops. Whatâ€™s also infuriating is how their delivery process has been partially shifted to uber-ized people, using their personal car, carelessly dropping packets in front of the doors and paid for each item delivered. This form of employment is basically a return to 19th century practices, with the aid of 21th century technology. A shame.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;monopolies are bad&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Another reason is the &amp;lt;strong&amp;gt;dominant position of Amazon over online shopping&amp;lt;/strong&amp;gt;. Having such a big player killing all the competition is never good in the long run for consumers. There are already a lot of products that are difficult to find outside of Amazon.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;no social responsibility&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Finally thereâ€™s the &amp;lt;strong&amp;gt;appalling lack of social responsibility&amp;lt;/strong&amp;gt; of the company. From under-paying their employees, treating them like shit in fulfilment centres or even organizing this ridiculous global auction for HQ2. Why would you want to participate to this? If you want to know what social responsibility is, just look at what &amp;lt;a href=&amp;quot;https://www.patagonia.com/actionworks&amp;quot;&amp;gt;Patagonia&amp;lt;/a&amp;gt; does.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;&amp;lt;strong&amp;gt;gazillionaire&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Jeff Bezos got $24 billion richer during the pandemic. Any sense in being that rich, especially if you have no ideas about what to do with the money?&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;â€œThe only way that I can see to deploy this much financial resource is by converting my Amazon winnings into space travel. That is basically it.â€&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;How could you be so blind to not see the million ways these resources could be used in a better way than burning rocket fuel?&amp;lt;/p&amp;gt;

        Thu, 16 May 2019 00:00:00 +0000
        https://ldom.net/why-i-cancelled-my-prime/
        https://ldom.net/why-i-cancelled-my-prime/
        
        
      
    
      
        How to use a CI (CodeShip) to deploy a theme that won&#39;t build on Github pages
        &amp;lt;p&amp;gt;Github pages is a nice and free way to host a web site with static pages. It also supports &amp;lt;a href=&amp;quot;https://jekyllrb.com/&amp;quot;&amp;gt;Jekyll&amp;lt;/a&amp;gt; themes, which is great when you want to make things easier to edit and post.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Github pages has a bunch of themes ready to be used and they also support any Jekyll theme hosted on a public repository on github.com. You just have to use &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;remote_theme&amp;lt;/code&amp;gt; instead of &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;theme&amp;lt;/code&amp;gt; in the &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;__config.yml&amp;lt;/code&amp;gt; file.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;However, sometimes the theme that you have chosen builds without errors locally but doesnâ€™t build when Github tries to do it. And then the error message is everything but helpful.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Locally you get this:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;$ &amp;lt;/span&amp;gt;bundle &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;exec &amp;lt;/span&amp;gt;jekyll doctor &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--config&amp;lt;/span&amp;gt; _config.yml
Configuration file: _config.yml
  Your &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;test &amp;lt;/span&amp;gt;results are &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;in&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt; Everything looks fine.&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;And when Github builds it, you get this:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;The page build failed &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;for &amp;lt;/span&amp;gt;the master branch with the following error:

Page build failed. For more information, see https://help.github.com/en/articles/troubleshooting-github-pages-builds.&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;As you can see &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;Page build failed.&amp;lt;/code&amp;gt; is not very useful. After hours trying to find the potential errors that they mention in the troubleshooting page, I gave up and went for a different solution.&amp;lt;/p&amp;gt;

&amp;lt;!--more--&amp;gt;

&amp;lt;p&amp;gt;The solution is to use a second repository (in my case: &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;ldom-src&amp;lt;/code&amp;gt;) to host the source files with the theme. These are the files you were putting on the original repository for the github pages (in my case: &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;ldom&amp;lt;/code&amp;gt;). Then setup a CI server (Continuous Integration) to build the static files every time you push to the &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;-src&amp;lt;/code&amp;gt; repository and push the static file to the github pages repository.&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Of course, you can put together the CI server yourself, using Jenkins for example, but itâ€™s easier when you donâ€™t have to manage a server for that. CodeShip is a CI service (I have no affiliation with them) that offers a free account limited to 100 builds per month (which is plenty for a personal site that youâ€™ll update 30 times max per month).&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;Here is how you set it up and the scripts to use:&amp;lt;/p&amp;gt;

&amp;lt;ol&amp;gt;
  &amp;lt;li&amp;gt;Go to &amp;lt;a href=&amp;quot;https://codeship.com&amp;quot;&amp;gt;https://codeship.com&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Sign up for the free tier.&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;Create a new project.&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;

&amp;lt;p&amp;gt;In the Setup Commands tab, select â€œI want to create my own custom commandsâ€ and use:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-bash&amp;quot; data-lang=&amp;quot;bash&amp;quot;&amp;gt;&amp;lt;table class=&amp;quot;rouge-table&amp;quot;&amp;gt;&amp;lt;tbody&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;td class=&amp;quot;gutter gl&amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;lineno&amp;quot;&amp;gt;1
2
&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td class=&amp;quot;code&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;bundle &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;install
&amp;lt;/span&amp;gt;bundle &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;exec &amp;lt;/span&amp;gt;jekyll build &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--config&amp;lt;/span&amp;gt; _config.yml
&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&amp;lt;/tbody&amp;gt;&amp;lt;/table&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;In the Setup Commands text area, use:&amp;lt;/p&amp;gt;

&amp;lt;figure class=&amp;quot;highlight&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;code class=&amp;quot;language-shell&amp;quot; data-lang=&amp;quot;shell&amp;quot;&amp;gt;&amp;lt;table class=&amp;quot;rouge-table&amp;quot;&amp;gt;&amp;lt;tbody&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;td class=&amp;quot;gutter gl&amp;quot;&amp;gt;&amp;lt;pre class=&amp;quot;lineno&amp;quot;&amp;gt;1
2
3
4
5
6
7
8
9
10
11
12
&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td class=&amp;quot;code&amp;quot;&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;REMOTE_REPOSITORY&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;${&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;REMOTE_REPOSITORY&amp;lt;/span&amp;gt;:?&amp;lt;span class=&amp;quot;s1&amp;quot;&amp;gt;&#39;You need to configure the REMOTE_REPOSITORY environment variable!&#39;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;REMOTE_BRANCH&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;o&amp;quot;&amp;gt;=&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;${&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;REMOTE_BRANCH&amp;lt;/span&amp;gt;:?&amp;lt;span class=&amp;quot;s1&amp;quot;&amp;gt;&#39;You need to configure the REMOTE_BRANCH environment variable!&#39;&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;set&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;-e&amp;lt;/span&amp;gt;
git config &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--global&amp;lt;/span&amp;gt; user.email &amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;&amp;amp;lt;your email&amp;amp;gt;&amp;quot;&amp;lt;/span&amp;gt;
git config &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;--global&amp;lt;/span&amp;gt; user.name &amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;&amp;amp;lt;your name&amp;amp;gt; (codeship)&amp;quot;&amp;lt;/span&amp;gt;
git clone &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;${&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;REMOTE_REPOSITORY&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;}&amp;lt;/span&amp;gt; _tmp &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;-b&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;${&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;nv&amp;quot;&amp;gt;REMOTE_BRANCH&amp;lt;/span&amp;gt;&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;}&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;cp&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;-R&amp;lt;/span&amp;gt; _site/&amp;lt;span class=&amp;quot;k&amp;quot;&amp;gt;*&amp;lt;/span&amp;gt; _tmp/
&amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;cd &amp;lt;/span&amp;gt;_tmp
git add &amp;lt;span class=&amp;quot;nb&amp;quot;&amp;gt;.&amp;lt;/span&amp;gt;
git status
git commit &amp;lt;span class=&amp;quot;nt&amp;quot;&amp;gt;-m&amp;lt;/span&amp;gt; &amp;lt;span class=&amp;quot;s2&amp;quot;&amp;gt;&amp;quot;new build&amp;quot;&amp;lt;/span&amp;gt;
git push origin master
&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&amp;lt;/tbody&amp;gt;&amp;lt;/table&amp;gt;&amp;lt;/code&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/figure&amp;gt;

&amp;lt;p&amp;gt;In the Environment tab, create 2 environment variables (to be used in the script above):&amp;lt;/p&amp;gt;
&amp;lt;ul&amp;gt;
  &amp;lt;li&amp;gt;&amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;REMOTE_REPOSITORY&amp;lt;/code&amp;gt;: put the address of the destination repository, the one for the static Github pages, eg. &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;git@github.com:ldom/ldom.git&amp;lt;/code&amp;gt;&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;&amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;REMOTE_BRANCH&amp;lt;/code&amp;gt;: put &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;master&amp;lt;/code&amp;gt;&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

&amp;lt;ol&amp;gt;
  &amp;lt;li&amp;gt;The last step is to configure CodeShip and Github to allow the deploy script to push (write) to the destination repository.&amp;lt;/li&amp;gt;
&amp;lt;/ol&amp;gt;

&amp;lt;p&amp;gt;This is described on this page: &amp;lt;a href=&amp;quot;https://documentation.codeship.com/basic/builds-and-configuration/access-to-other-repositories/#sts=The%20Machine%20User%20Solution&amp;quot;&amp;gt;https://documentation.codeship.com/basic/builds-and-configuration/access-to-other-repositories/#sts=The%20Machine%20User%20Solution&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;

&amp;lt;p&amp;gt;I recommend using the â€œMachine Userâ€ solution. 
It involves:&amp;lt;/p&amp;gt;
&amp;lt;ul&amp;gt;
  &amp;lt;li&amp;gt;creating a new github.com user and&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;give it access to the destination repository (by inviting it as a collaborator in the destination repository),&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;then you have to remove the key from the Deploy section under the destination repository (not your user settings, but the repository settings).&amp;lt;/li&amp;gt;
  &amp;lt;li&amp;gt;At last, you need to put that key (that has to be copied from General tab of the Project Settings in CodeShip) as a new key on the â€œMachine Userâ€ github account. (Note that if you donâ€™t remove it first from the Deploy settings of the destination repository, you wonâ€™t be able to add that key to the â€œMachine Userâ€ keys).&amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;

&amp;lt;p&amp;gt;Once all of this is done, youâ€™ll enjoy a full automated (and free) system where you just have to push to the &amp;lt;code class=&amp;quot;language-plaintext highlighter-rouge&amp;quot;&amp;gt;-src&amp;lt;/code&amp;gt; repository for everything to be built and deployed to Github pages!&amp;lt;/p&amp;gt;

        Fri, 10 May 2019 00:00:00 +0000
        https://ldom.net/ci-for-github-pages/
        https://ldom.net/ci-for-github-pages/">


  

  
  <link rel="icon" sizes="32x32" href="https://ldom.net/assets/img/favicon-32x32.png" />
  <link rel="icon" sizes="192x192" href="https://ldom.net/assets/img/touch-icon-192x192.png" />
  <link rel="apple-touch-icon-precomposed" sizes="180x180" href="https://ldom.net/assets/img/apple-touch-icon-180x180-precomposed.png" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://ldom.net/assets/img/apple-touch-icon-152x152-precomposed.png" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://ldom.net/assets/img/apple-touch-icon-144x144-precomposed.png" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://ldom.net/assets/img/apple-touch-icon-120x120-precomposed.png" />
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://ldom.net/assets/img/apple-touch-icon-114x114-precomposed.png" />
  <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://ldom.net/assets/img/apple-touch-icon-76x76-precomposed.png" />
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://ldom.net/assets/img/apple-touch-icon-72x72-precomposed.png" />
  <link rel="apple-touch-icon-precomposed" href="https://ldom.net/assets/img/apple-touch-icon-precomposed.png" />
  <meta name="msapplication-TileImage" content="https://ldom.net/assets/img/msapplication_tileimage.png" />
  <meta name="msapplication-TileColor" content="#fabb00" />

  

</head>
<body id="top-of-page" class="">



<nav id="tnav" class="tnav-horizontal">
  <ul class="tnav-list">

    <li id="tnav-logo" class="tnav-item"><a href="https://ldom.net/" accesskey="1">Ldom.net</a></li>

    <li id="tnav-search" class="tnav-item"><a href="https://ldom.net/search/"><svg class="nav-icon" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1216 832q0-185-131.5-316.5t-316.5-131.5-316.5 131.5-131.5 316.5 131.5 316.5 316.5 131.5 316.5-131.5 131.5-316.5zm512 832q0 52-38 90t-90 38q-54 0-90-38l-343-342q-179 124-399 124-143 0-273.5-55.5t-225-150-150-225-55.5-273.5 55.5-273.5 150-225 225-150 273.5-55.5 273.5 55.5 225 150 150 225 55.5 273.5q0 220-124 399l343 343q37 37 37 90z"/></svg></a></li>
    <li id="tnav-work" class="tnav-item"><a href="https://ldom.net/work/">work</a></li>
    <li id="tnav-leisure" class="tnav-item"><a href="https://ldom.net/leisure/">leisure</a></li>

  </ul>
</nav>





<main role="main" id="content" class="row">
  <div class="medium-8 medium-centered columns">
    <article itemscope itemtype="http://schema.org/Article">
      <meta content="" itemprop="inLanguage" />
      <header>

        
        


        



        


        


        <h1 itemprop="name headline">RSS Feed</h1>
      </header>


      <div class="main-content" itemprop="articleSection">
        
        <?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Ldom.net â€“ </title>
    <description></description>
    <link>https://ldom.net/</link>
    <atom:link href="https://ldom.net/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Tue, 09 Jun 2020 21:45:01 +0000</pubDate>
    <lastBuildDate>Tue, 09 Jun 2020 21:45:01 +0000</lastBuildDate>
    <generator>Jekyll v4.1.0</generator>
    
      <item>
        <title>Create Multi-Region Topics Programmatically With Python and confluent-kafka-python</title>
        <description>&lt;p&gt;Confluent Platform 5.4 introduced Multi-Region Clusters (MRC). MRC adds numerous cool features such as Follower-Fetching or asynchronous Observers.&lt;/p&gt;

&lt;p&gt;This article explains how to create topics with replicas and observers programmatically using python.&lt;/p&gt;

&lt;p&gt;More details on MRC clusters: &lt;a href=&quot;https://docs.confluent.io/current/multi-dc-deployments/multi-region.html&quot;&gt;https://docs.confluent.io/current/multi-dc-deployments/multi-region.html&lt;/a&gt;&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;To create a topic with replicas and (asynchronous) observers, you have to pass replica and observers placement details in the form of a JSON object.&lt;/p&gt;

&lt;p&gt;Here is an example using the command-line:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cat &lt;/span&gt;placement.json
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;version&quot;&lt;/span&gt;:1,&lt;span class=&quot;s2&quot;&gt;&quot;replicas&quot;&lt;/span&gt;:[&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;count&quot;&lt;/span&gt;:2,&lt;span class=&quot;s2&quot;&gt;&quot;constraints&quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;rack&quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&quot;east&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}}]&lt;/span&gt;,&lt;span class=&quot;s2&quot;&gt;&quot;observers&quot;&lt;/span&gt;:[&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;count&quot;&lt;/span&gt;:1,&lt;span class=&quot;s2&quot;&gt;&quot;constraints&quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;rack&quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&quot;west&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}}]}&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;kafka-topics  &lt;span class=&quot;nt&quot;&gt;--create&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--bootstrap-server&lt;/span&gt; &amp;lt;IP address&amp;gt;:9092 &lt;span class=&quot;nt&quot;&gt;--topic&lt;/span&gt; test2 &lt;span class=&quot;nt&quot;&gt;--partitions&lt;/span&gt; 5 &lt;span class=&quot;nt&quot;&gt;--replica-placement&lt;/span&gt; placement.json
&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;kafka-topics &lt;span class=&quot;nt&quot;&gt;--zookeeper&lt;/span&gt; &amp;lt;IP address&amp;gt;:2181 &lt;span class=&quot;nt&quot;&gt;--describe&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--topic&lt;/span&gt; test2

Topic: test2	PartitionCount: 5	ReplicationFactor: 3	Configs: confluent.placement.constraints&lt;span class=&quot;o&quot;&gt;={&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;version&quot;&lt;/span&gt;:1,&lt;span class=&quot;s2&quot;&gt;&quot;replicas&quot;&lt;/span&gt;:[&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;count&quot;&lt;/span&gt;:2,&lt;span class=&quot;s2&quot;&gt;&quot;constraints&quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;rack&quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&quot;east&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}}]&lt;/span&gt;,&lt;span class=&quot;s2&quot;&gt;&quot;observers&quot;&lt;/span&gt;:[&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;count&quot;&lt;/span&gt;:1,&lt;span class=&quot;s2&quot;&gt;&quot;constraints&quot;&lt;/span&gt;:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;rack&quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&quot;west&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}}]}&lt;/span&gt;
	Topic: test2	Partition: 0	Leader: 2	Replicas: 2,3,4	Isr: 2,3	Offline:
	Topic: test2	Partition: 1	Leader: 3	Replicas: 3,1,5	Isr: 3,1	Offline:
	Topic: test2	Partition: 2	Leader: 1	Replicas: 1,2,4	Isr: 1,2	Offline:
	Topic: test2	Partition: 3	Leader: 2	Replicas: 2,1,5	Isr: 2,1	Offline:
	Topic: test2	Partition: 4	Leader: 3	Replicas: 3,2,4	Isr: 3,2	Offline:&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;To do the same programmatically with python, you have to use the &lt;a href=&quot;https://docs.confluent.io/current/clients/confluent-kafka-python/&quot;&gt;confluent-kafka-python&lt;/a&gt; python library.&lt;/p&gt;

&lt;p&gt;Specific to MRC is that you have to pass a config dict with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;confluent.placement.constraints&lt;/code&gt; instead of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;replication_factor&lt;/code&gt; argument. See line 5 below.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;confluent_kafka.admin&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AdminClient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NewTopic&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;placement&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;{&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;:1,&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;replicas&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;:[{&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;:2,&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;constraints&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;:{&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;rack&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;east&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;}}],&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;observers&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;:[{&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;:1,&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;constraints&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;:{&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;rack&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;west&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;}}]}&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;new_topic&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NewTopic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;test1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_partitions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'confluent.placement.constraints'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;placement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})]&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AdminClient&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'bootstrap.servers'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'&amp;lt;IP address&amp;gt;:9092'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_topics&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new_topic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;topic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;items&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Topic {} created&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;topic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;except&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Failed to create topic {}: {}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;topic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Thatâ€™s it!&lt;/p&gt;
</description>
        <pubDate>Mon, 18 May 2020 00:00:00 +0000</pubDate>
        <link>https://ldom.net/create-mrc-topics-programmatically-with-python/</link>
        <guid isPermaLink="true">https://ldom.net/create-mrc-topics-programmatically-with-python/</guid>
        
        
      </item>
    
      <item>
        <title>Switch Between Apache Kafka and Confluent Versions with Homebrew</title>
        <description>&lt;p&gt;Once youâ€™ve installed Apache Kafka and the Confluent Platform using &lt;a href=&quot;https://brew.sh&quot;&gt;Homebrew&lt;/a&gt;, there are many ways to maintain multiple versions of the package on your local computer.&lt;/p&gt;

&lt;p&gt;(This is kinda part 2 of &lt;a href=&quot;/homebrew-confluent-platform/&quot;&gt;Install and Configure Apache Kafka and the Confluent Platform using Homebrew&lt;/a&gt;.)&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;To switch from a version to another with Homebrew (here: 5.3.1), simply do:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;brew switch confluent-platform 5.3.1&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;This is great but it relies on the fact that the version you want to switch to is currently installed locally in your cellar. If itâ€™s the case, Homebrew does the switch instantly by updating symlinks.&lt;/p&gt;

&lt;p&gt;There are several ways to ensure that you have all the versions that you want in your local computer. At some point, they will collide with the fact that Homebrew does a cleanup every 30 days or each time you run an upgrade, unless you the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HOMEBREW_NO_INSTALL_CLEANUP&lt;/code&gt; envvar.&lt;/p&gt;

&lt;p&gt;You can:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HOMEBREW_NO_INSTALL_CLEANUP&lt;/code&gt; when upgrading all Homebrew packages to keep the previous versions on your disk. Unless it is set, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brew cleanup&lt;/code&gt; will be run for the formula that youâ€™re upgrading or, every 30 days, for all formulae. It will fill your disk quite quickly if you use a lot of packages and unless youâ€™re super careful, youâ€™ll loose your previous versions sooner or later.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Build you own keg and feed it with the versions that you want to keep using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brew extract&lt;/code&gt;. Too much work IMHO.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HOMEBREW_NO_INSTALL_CLEANUP&lt;/code&gt; when upgrading &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;confluent-platform&lt;/code&gt;. If the version you want is gone, restore it using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brew install&lt;/code&gt; referencing the &lt;b&gt;specific commit number&lt;/b&gt;. (Also remember to backup the Confluent/Kafka config files in a folder outside of Homebrew.)&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;In this article, Iâ€™m describing Option 3.&lt;/p&gt;

&lt;p&gt;Reference points:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://formulae.brew.sh/formula/confluent-platform&quot;&gt;https://formulae.brew.sh/formula/confluent-platform&lt;/a&gt; â€“&amp;gt; page for the formula in Homebrew&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/Homebrew/homebrew-core/blob/master/Formula/confluent-platform.rb&quot;&gt;https://github.com/Homebrew/homebrew-core/blob/master/Formula/confluent-platform.rb&lt;/a&gt; â€“&amp;gt; location of the formula for the Confluent Platform in the repo&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/Homebrew/homebrew-core/commits/master/Formula/confluent-platform.rb&quot;&gt;https://github.com/Homebrew/homebrew-core/commits/master/Formula/confluent-platform.rb&lt;/a&gt; â€“&amp;gt; commit history of the formula&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;first-install&quot;&gt;First Install&lt;/h1&gt;

&lt;p&gt;To install for the first time, run:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;brew &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;confluent-platform&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h1 id=&quot;upgrades&quot;&gt;Upgrades&lt;/h1&gt;

&lt;p&gt;To upgrade without removing the previous versions, run:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;~ &lt;span class=&quot;nv&quot;&gt;$ HOMEBREW_NO_INSTALL_CLEANUP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 brew upgrade confluent-platform
Updating Homebrew...
&lt;span class=&quot;o&quot;&gt;==&amp;gt;&lt;/span&gt; Auto-updated Homebrew!
Updated 1 tap &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;homebrew/core&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;==&amp;gt;&lt;/span&gt; Updated Formulae
.../...

&lt;span class=&quot;o&quot;&gt;==&amp;gt;&lt;/span&gt; Upgrading 1 outdated package:
confluent-platform 5.3.1 -&amp;gt; 5.4.0
&lt;span class=&quot;o&quot;&gt;==&amp;gt;&lt;/span&gt; Upgrading confluent-platform
&lt;span class=&quot;o&quot;&gt;==&amp;gt;&lt;/span&gt; Downloading https://packages.confluent.io/archive/5.4/confluent-5.4.0-2.12.tar.gz
&lt;span class=&quot;c&quot;&gt;######################################################################## 100.0%&lt;/span&gt;
ðŸº  /usr/local/Cellar/confluent-platform/5.4.0: 2,943 files, 951.4MB, built &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;85 minutes 52 seconds
&lt;span class=&quot;o&quot;&gt;==&amp;gt;&lt;/span&gt; Checking &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;dependents of upgraded formulae...
&lt;span class=&quot;o&quot;&gt;==&amp;gt;&lt;/span&gt; No dependents found!&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;(To set the option permanently and for all the Homebrew packages, you can add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;export HOMEBREW_NO_INSTALL_CLEANUP=1&lt;/code&gt; to your bash profile but I donâ€™t recommend it.)&lt;/p&gt;

&lt;p&gt;To check what you have locally (in this example, see line 7 and 9, I have 5.3.1 and 5.4.0):&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;~ &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;brew info confluent-platform
confluent-platform: stable 5.4.0
Developer-optimized distribution of Apache Kafka
https://www.confluent.io/product/confluent-platform/
Conflicts with:
 kafka &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;because kafka also ships with identically named Kafka related executables&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
/usr/local/Cellar/confluent-platform/5.3.1 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;2,499 files, 827.2MB&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
 Built from &lt;span class=&quot;nb&quot;&gt;source &lt;/span&gt;on 2020-02-26 at 14:22:54
/usr/local/Cellar/confluent-platform/5.4.0 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;2,943 files, 951.4MB&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
 Built from &lt;span class=&quot;nb&quot;&gt;source &lt;/span&gt;on 2020-02-28 at 08:08:33
From: https://github.com/Homebrew/homebrew-core/blob/master/Formula/confluent-platform.rb
&lt;span class=&quot;o&quot;&gt;==&amp;gt;&lt;/span&gt; Requirements
Required: java &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 1.8 âœ”
&lt;span class=&quot;o&quot;&gt;==&amp;gt;&lt;/span&gt; Analytics
&lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt;: 317 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;30 days&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, 572 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;90 days&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, 1,593 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;365 days&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
install-on-request: 316 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;30 days&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, 570 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;90 days&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, 1,578 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;365 days&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
build-error: 0 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;30 days&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;You can also check what on the disk:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;~ &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; /usr/local/Cellar/confluent-platform/
5.3.1	5.4.0&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h1 id=&quot;re-install-of-a-previous-version&quot;&gt;Re-install of a Previous Version&lt;/h1&gt;

&lt;p&gt;If you want to re-install a previous version:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Get the commit number at &lt;a href=&quot;https://github.com/Homebrew/homebrew-core/commits/master/Formula/confluent-platform.rb&quot;&gt;https://github.com/Homebrew/homebrew-core/commits/master/Formula/confluent-platform.rb&lt;/a&gt;. If it says â€œthis commit history is taking too long to generateâ€, then clone &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;homebrew-core&lt;/code&gt; and check the commits there with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git log master -- Formula/confluent-platform.rb&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;From the above page, you can get the commit numbers of the previous versions. For your convenience, I am listing here some of the recent ones:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;5.4.1  â‡¢ &lt;a href=&quot;https://raw.githubusercontent.com/Homebrew/homebrew-core/0a3b63e6acbc3257b804aa229900e7aed46b71b8/Formula/confluent-platform.rb&quot;&gt;https://raw.githubusercontent.com/Homebrew/homebrew-core/0a3b63e6acbc3257b804aa229900e7aed46b71b8/Formula/confluent-platform.rb&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;5.4.0  â‡¢ &lt;a href=&quot;https://raw.githubusercontent.com/Homebrew/homebrew-core/2e229452f5cb591391e6b3f649378ae6d9a1bd1f/Formula/confluent-platform.rb&quot;&gt;https://raw.githubusercontent.com/Homebrew/homebrew-core/2e229452f5cb591391e6b3f649378ae6d9a1bd1f/Formula/confluent-platform.rb&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;5.3.1  â‡¢ &lt;a href=&quot;https://raw.githubusercontent.com/Homebrew/homebrew-core/1135feef30ba254f692bbeb9afea097b395f3634/Formula/confluent-platform.rb&quot;&gt;https://raw.githubusercontent.com/Homebrew/homebrew-core/1135feef30ba254f692bbeb9afea097b395f3634/Formula/confluent-platform.rb&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;5.3.0  â‡¢ &lt;a href=&quot;https://raw.githubusercontent.com/Homebrew/homebrew-core/6a76b682ff4969afec52cc34be58315cee3271fe/Formula/confluent-platform.rb&quot;&gt;https://raw.githubusercontent.com/Homebrew/homebrew-core/6a76b682ff4969afec52cc34be58315cee3271fe/Formula/confluent-platform.rb&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;For prior versions, itâ€™s a little more complicated as the formula was named &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;confluent-oss&lt;/code&gt; before.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Reference the commit number in the install command, for example to install 5.3.0:&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;brew &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;https://raw.githubusercontent.com/Homebrew/homebrew-core/6a76b682ff4969afec52cc34be58315cee3271fe/Formula/confluent-platform.rb&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Now, check what you have (see above) and go crazy switching versions:&lt;/p&gt;

&lt;p&gt;One last thing:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Donâ€™t forget to &lt;b&gt;stop running instances&lt;/b&gt; before upgrade/switch operations. (Ctrl-C on your terminalsâ€¦)&lt;/li&gt;
  &lt;li&gt;To fully &lt;b&gt;reset your data&lt;/b&gt; (delete your topics and log files) between version switches, find where the topics are stored (check the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;log.dirs&lt;/code&gt; config property, by default itâ€™s in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/tmp/kafka-logs&lt;/code&gt;):&lt;/li&gt;
&lt;/ul&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; /tmp/kafka-logs
&lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; /var/log/kafka/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Thatâ€™s all, folks!&lt;/p&gt;
</description>
        <pubDate>Thu, 27 Feb 2020 00:00:00 +0000</pubDate>
        <link>https://ldom.net/homebrew-switch-confluent-versions/</link>
        <guid isPermaLink="true">https://ldom.net/homebrew-switch-confluent-versions/</guid>
        
        
      </item>
    
      <item>
        <title>Install and Configure Apache Kafka and the Confluent Platform using Homebrew </title>
        <description>&lt;p&gt;If youâ€™re on a Mac, among the many ways to install Apache Kafka and the Confluent Platform, there is &lt;a href=&quot;https://brew.sh&quot;&gt;Homebrew&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The Confluent Platform is available there and installing it is as easy as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brew install confluent-platform&lt;/code&gt;.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Unfortunately, once youâ€™ve run that command, all the Confluent components are installed on your machine but itâ€™s not ready to start and thereâ€™s not much documentation to help you.&lt;/p&gt;

&lt;p&gt;The main advantages with using Homebrew to manage your Confluent packages is that you can have multiple versions of Confluent/Kafka installed and easily switch between them and &lt;b&gt;it uses a lot less resources than Docker&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;Because of my &lt;a href=&quot;/work/&quot;&gt;work&lt;/a&gt;, I constantly have to alter my Kafka setup and try new things, so in this article, Iâ€™ll focus on starting and configuring things manually.&lt;/p&gt;

&lt;p&gt;To install, run:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;brew &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;confluent-platform&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Once this is done, your install is not fully functional. You also have to create the appropriate &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/var/log&lt;/code&gt; folder:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nb&quot;&gt;sudo mkdir&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; /var/log/kafka
&lt;span class=&quot;nb&quot;&gt;sudo chown&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;whoami&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt; /var/log/kafka&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Then youâ€™re ready to start a zookeeper and a broker.&lt;/p&gt;

&lt;p&gt;If you want to modify the configuration first, edit those files:&lt;/p&gt;

&lt;p&gt;For zookeeper: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/etc/kafka/zookeeper.properties&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;For the broker: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/etc/kafka/server.properties&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;For connect: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/etc/kafka/connect-distributed.properties&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Note that &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/etc/kafka&lt;/code&gt; points to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/Cellar/confluent-platform/5.3.1/etc/kafka/&lt;/code&gt; if youâ€™re using 5.3.1.&lt;/p&gt;

&lt;p&gt;When youâ€™re happy with the config files, open up a bunch of &lt;a href=&quot;https://iterm2.com/&quot;&gt;terminal windows&lt;/a&gt; and run the various components:&lt;/p&gt;

&lt;p&gt;First, zookeeper:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;zookeeper-server-start /usr/local/etc/kafka/zookeeper.properties&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Then a broker:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;kafka-server-start /usr/local/etc/kafka/server.properties&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;For a Connect in distributed mode:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;connect-distributed /usr/local/etc/kafka/connect-distributed.properties&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Of course, in addition to the above, all the tools of the platform are installed:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; /usr/local/Cellar/confluent-platform/5.3.1/bin/
confluent-hub				kafka-api-start				kafka-mqtt-run-class			kafka-streams-application-reset		schema-registry-start
confluent-rebalancer			kafka-avro-console-consumer		kafka-mqtt-start			kafka-topics				schema-registry-stop
connect-distributed			kafka-avro-console-producer		kafka-mqtt-stop				kafka-verifiable-consumer		schema-registry-stop-service
connect-standalone			kafka-broker-api-versions		kafka-preferred-replica-election	kafka-verifiable-producer		security-plugins-run-class
control-center-3_0_0-reset		kafka-configs				kafka-producer-perf-test		ksql					sr-acl-cli
control-center-3_0_1-reset		kafka-console-consumer			kafka-reassign-partitions		ksql-datagen				stub-api-run-class
control-center-console-consumer		kafka-console-producer			kafka-replica-verification		ksql-print-metrics			stub-api-start
control-center-export			kafka-consumer-groups			kafka-rest-run-class			ksql-run-class				support-metrics-bundle
control-center-reset			kafka-consumer-perf-test		kafka-rest-start			ksql-server-start			zookeeper-security-migration
control-center-run-class		kafka-delegation-tokens			kafka-rest-stop				ksql-server-stop			zookeeper-server-start
control-center-set-acls			kafka-delete-records			kafka-rest-stop-service			ksql-stop				zookeeper-server-stop
control-center-start			kafka-dump-log				kafka-run-class				ksql-test-runner			zookeeper-shell
control-center-stop			kafka-log-dirs				kafka-server-start			replicator
kafka-acls				kafka-mirror-maker			kafka-server-stop			schema-registry-run-class&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;You can use them locally, for example:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;kafka-topics &lt;span class=&quot;nt&quot;&gt;--zookeeper&lt;/span&gt; localhost:2181 &lt;span class=&quot;nt&quot;&gt;--list&lt;/span&gt;
__confluent.support.metrics
__consumer_offsets
connect-configs
connect-offsets
connect-status
file_source
laurent
~ &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;kafka-console-producer &lt;span class=&quot;nt&quot;&gt;--broker-list&lt;/span&gt; localhost:9092 &lt;span class=&quot;nt&quot;&gt;--topic&lt;/span&gt; laurent
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;one more line
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;If you want more than one zookeeper and one broker (which is enough for many local development tasks or configuration tests), you have to duplicate the configuration files, alter them (at least, add a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;broker-id&lt;/code&gt; into the broker config and point the brokers to separate &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;log.dirs&lt;/code&gt; folders) and run the above commands into additional terminal windows pointing to separate config files.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/tech/homebrew-confluent.png&quot; alt=&quot;iTerm galore&quot; /&gt;&lt;/p&gt;

&lt;p&gt;And, yes, youâ€™ll end up with many terminal windows, but who cares.&lt;/p&gt;

&lt;p&gt;See also: &lt;a href=&quot;/homebrew-switch-confluent-versions/&quot;&gt;Switch Between Confluent Versions with Homebrew&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Thu, 27 Feb 2020 00:00:00 +0000</pubDate>
        <link>https://ldom.net/homebrew-confluent-platform/</link>
        <guid isPermaLink="true">https://ldom.net/homebrew-confluent-platform/</guid>
        
        
      </item>
    
      <item>
        <title>Carl von Ossietzky</title>
        <description>&lt;p&gt;Musing on the Wikipedia, I came across &lt;a href=&quot;https://en.wikipedia.org/wiki/Carl_von_Ossietzky&quot;&gt;this page&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Carl von Ossietzky (1889 â€” 1938) was a German journalist and pacifist that exposed the clandestine German re-armament between WW1 and 2 and was convicted of espionage in 1931 for it.&lt;/p&gt;

&lt;p&gt;He received the 1935 Nobel Peace Prize and died of tuberculosis while imprisoned.&lt;/p&gt;

&lt;p&gt;Iâ€™m not going to paraphrase the wiki article here, you should read it. Thereâ€™s a few things that I find eye-opening in the troubled era that we live in. If History does not repeat itself, at least modern corrupted powers find a lot of inspiration in their models from the past.&lt;/p&gt;

&lt;p&gt;Was he the first whislteblower? Certainly not, but this is one more stone in the garden of those who said (or keep saying) â€œwe didnâ€™t knowâ€.&lt;/p&gt;

&lt;p&gt;Another fact is that he wasnâ€™t an extremist. He wrote for a journal that rejected Communism, but found the Social Democrat too compromised. Are whislteblowers extremists? I donâ€™t think so.&lt;/p&gt;

&lt;p&gt;Being released after a first stay in prison, he didnâ€™t back out and wrote: &lt;cite&gt;â€œâ€¦/â€¦German and Jewish are not fixed categories established once and for all in some mystic prehistoric age, but rather flexible concepts which change their content with spiritual and economic changes dependent on the general dynamics of history.â€&lt;/cite&gt;&lt;/p&gt;

&lt;p&gt;He finally added: &lt;cite&gt;â€œToday there is a strong smell of blood in the air. Literary anti-Semitism forges the moral weapon for murder. Sturdy and honest lads will take care of the restâ€.&lt;/cite&gt; A visionary description of how a general cultural/societal atmosphere helps set the tone for more radical actions.&lt;/p&gt;

&lt;p&gt;After Hilter got to power, he continued to speak out against the nazis and ended up arrested under â€œprotective custodyâ€.&lt;/p&gt;

&lt;p&gt;The â€œprotective custodyâ€ has always been a convenient concept for abusing power. To protect them from a danger you helped created, you put your opponents in prison. Itâ€™s like jailing black people because they could be hurt by white nationalists. (Letâ€™s not give ideas to the fake president.)&lt;/p&gt;

&lt;p&gt;When Ossietzky was awarded the Nobel Peace Prize in 1935, Hermann GÃ¶ring strongly suggested he declines the prize, saying that accepting it would mean excluding himself from the German people. Another early version of the ubiquitous but very tired: â€œif youâ€™re against me, youâ€™re anti-patrioticâ€.&lt;/p&gt;

&lt;p&gt;At last, what is sad is that Germanyâ€™s Federal Court of Justice didnâ€™t clear his conviction in 1992, applying the law as it stood in 1931. At least he got a memorial statue in Pankow. Iâ€™ll try to bring flowers there next time Iâ€™m in Berlin.&lt;/p&gt;
</description>
        <pubDate>Tue, 10 Dec 2019 00:00:00 +0000</pubDate>
        <link>https://ldom.net/carl-von-ossietzky/</link>
        <guid isPermaLink="true">https://ldom.net/carl-von-ossietzky/</guid>
        
        
      </item>
    
      <item>
        <title>My secret trail recipes</title>
        <description>&lt;p&gt;OK, maybe not so secret, and maybe not so original, but hereâ€™s the breakdown.&lt;/p&gt;

&lt;h1 id=&quot;trail-mix&quot;&gt;trail mix&lt;/h1&gt;

&lt;p&gt;For 800g of mix (4 days at 200g per day)&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Dried banana: 100g &amp;gt; 300 cal&lt;/li&gt;
  &lt;li&gt;Raisin: 200g &amp;gt; 600 cal&lt;/li&gt;
  &lt;li&gt;Pumpkin seeds: 50g &amp;gt; 310 cal&lt;/li&gt;
  &lt;li&gt;Cajou nut: 100g &amp;gt; 630 cal&lt;/li&gt;
  &lt;li&gt;Dates: 150g &amp;gt; 525 cal&lt;/li&gt;
  &lt;li&gt;Almonds: 80g &amp;gt; 530 cal&lt;/li&gt;
  &lt;li&gt;Peanuts (unsalted): 120g &amp;gt; 770 cal&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Total calories: 3,665 calories (approx. 460 cal/100g)&lt;/p&gt;

&lt;p&gt;Notes:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Peanuts have the best calories/weight ratio but I get bored of them pretty quickly so I donâ€™t put that much in this mix.&lt;/li&gt;
  &lt;li&gt;Fruits are great but they roughly have half the calories per weight as nuts.&lt;/li&gt;
  &lt;li&gt;On multi-day hikes, I take 200g per day of this mix, plus 2 snack bars for each day (small Snickers bars, Cliff, Kind or Kind Fruit bars).&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;other-meals&quot;&gt;other meals&lt;/h1&gt;

&lt;p&gt;While weâ€™re talking about trail food, here is what I take for the other meals:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;For breakfast, I mix 50g of oatmeal with 35g of hot chocolate powder and 60g of muesli. I soak it in water for 1/2hr and that gives me 540 calories for a weight of 145g.&lt;/li&gt;
  &lt;li&gt;For lunch and diner, I used to have couscous (cold soaked) and 2 small dry sausages for 520 calories and 140g or cold soaked mashed potatoes and 2 slices of dried bacon for 620 cal and 185g. Now that Iâ€™m vegetarian, Iâ€™m going to have to find something to replace the sausages and bacon.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In total, it is around 2,500 cal and 700g per day of food (not counting the few snack bars).&lt;/p&gt;

&lt;p&gt;As I quickly get bored with eating the same thing every day, I tend to eat less each day on the trail, so I think from now on, Iâ€™ll go with 600g per day. I have reserves if you see what I mean and itâ€™s not over 4 to 8 days of hiking that Iâ€™m going to develop health problems if I donâ€™t eat enough calories per day. On a long thru-hike I would do differently of course.&lt;/p&gt;

&lt;h1 id=&quot;cold-soak-vs-warm-food&quot;&gt;cold-soak vs warm food&lt;/h1&gt;

&lt;p&gt;When I have to carry food on my back, I prefer to take less weight so I donâ€™t take a stove or cooking utensils. I only take food that I can cold-soak in water (dry mashed potatoes, couscous or ramen). To prepare it, I have a used ice-cream container with a screwed lid. Just put the food, add water, shake well and let it soak for half an hour.&lt;/p&gt;

&lt;p&gt;If Iâ€™m on a canoe or a motorcycle, then things are different, I take my little gas stove and I enjoy warm food (mostly pasta and ramen).&lt;/p&gt;
</description>
        <pubDate>Sat, 18 May 2019 00:00:00 +0000</pubDate>
        <link>https://ldom.net/my-trail-recipes/</link>
        <guid isPermaLink="true">https://ldom.net/my-trail-recipes/</guid>
        
        
      </item>
    
      <item>
        <title>Why I cancelled my Amazon Prime subscription</title>
        <description>&lt;p&gt;We all know the Amazon marketplace and its features. Itâ€™s a fantastic machine for selling products online, probably the best in the world.&lt;/p&gt;

&lt;p&gt;One-click shopping, wish lists, save for later, the infinite selection of products and vendors, the lowest prices for most products, etc. With Prime you get all of this, plus free shipping on almost every item.&lt;/p&gt;

&lt;p&gt;This is partially the reason why I cancelled my Prime subscription and why Iâ€™m not buying anymore from Amazon and moving my stuff off of AWS.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;selfish reason: less shit you donâ€™t need&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;By not buying anymore from them, I buy a lot &lt;strong&gt;less stuff that I donâ€™t really need&lt;/strong&gt;. This is better for my budgetâ€¦&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;a sea of small packages delivered by an uber-ized workforce&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Then, Iâ€™m trying to &lt;strong&gt;buy less from online sources&lt;/strong&gt;. Buying online is great and convenient, but itâ€™s not really good for the planet to have all these small packets shipped in all directions. Itâ€™s also not good for the local shops. Whatâ€™s also infuriating is how their delivery process has been partially shifted to uber-ized people, using their personal car, carelessly dropping packets in front of the doors and paid for each item delivered. This form of employment is basically a return to 19th century practices, with the aid of 21th century technology. A shame.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;monopolies are bad&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Another reason is the &lt;strong&gt;dominant position of Amazon over online shopping&lt;/strong&gt;. Having such a big player killing all the competition is never good in the long run for consumers. There are already a lot of products that are difficult to find outside of Amazon.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;no social responsibility&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Finally thereâ€™s the &lt;strong&gt;appalling lack of social responsibility&lt;/strong&gt; of the company. From under-paying their employees, treating them like shit in fulfilment centres or even organizing this ridiculous global auction for HQ2. Why would you want to participate to this? If you want to know what social responsibility is, just look at what &lt;a href=&quot;https://www.patagonia.com/actionworks&quot;&gt;Patagonia&lt;/a&gt; does.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;gazillionaire&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Jeff Bezos got $24 billion richer during the pandemic. Any sense in being that rich, especially if you have no ideas about what to do with the money?&lt;/p&gt;

&lt;p&gt;â€œThe only way that I can see to deploy this much financial resource is by converting my Amazon winnings into space travel. That is basically it.â€&lt;/p&gt;

&lt;p&gt;How could you be so blind to not see the million ways these resources could be used in a better way than burning rocket fuel?&lt;/p&gt;
</description>
        <pubDate>Thu, 16 May 2019 00:00:00 +0000</pubDate>
        <link>https://ldom.net/why-i-cancelled-my-prime/</link>
        <guid isPermaLink="true">https://ldom.net/why-i-cancelled-my-prime/</guid>
        
        
      </item>
    
      <item>
        <title>How to use a CI (CodeShip) to deploy a theme that won't build on Github pages</title>
        <description>&lt;p&gt;Github pages is a nice and free way to host a web site with static pages. It also supports &lt;a href=&quot;https://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt; themes, which is great when you want to make things easier to edit and post.&lt;/p&gt;

&lt;p&gt;Github pages has a bunch of themes ready to be used and they also support any Jekyll theme hosted on a public repository on github.com. You just have to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;remote_theme&lt;/code&gt; instead of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;theme&lt;/code&gt; in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__config.yml&lt;/code&gt; file.&lt;/p&gt;

&lt;p&gt;However, sometimes the theme that you have chosen builds without errors locally but doesnâ€™t build when Github tries to do it. And then the error message is everything but helpful.&lt;/p&gt;

&lt;p&gt;Locally you get this:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;jekyll doctor &lt;span class=&quot;nt&quot;&gt;--config&lt;/span&gt; _config.yml
Configuration file: _config.yml
  Your &lt;span class=&quot;nb&quot;&gt;test &lt;/span&gt;results are &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; Everything looks fine.&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;And when Github builds it, you get this:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;The page build failed &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;the master branch with the following error:

Page build failed. For more information, see https://help.github.com/en/articles/troubleshooting-github-pages-builds.&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;As you can see &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Page build failed.&lt;/code&gt; is not very useful. After hours trying to find the potential errors that they mention in the troubleshooting page, I gave up and went for a different solution.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;The solution is to use a second repository (in my case: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ldom-src&lt;/code&gt;) to host the source files with the theme. These are the files you were putting on the original repository for the github pages (in my case: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ldom&lt;/code&gt;). Then setup a CI server (Continuous Integration) to build the static files every time you push to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-src&lt;/code&gt; repository and push the static file to the github pages repository.&lt;/p&gt;

&lt;p&gt;Of course, you can put together the CI server yourself, using Jenkins for example, but itâ€™s easier when you donâ€™t have to manage a server for that. CodeShip is a CI service (I have no affiliation with them) that offers a free account limited to 100 builds per month (which is plenty for a personal site that youâ€™ll update 30 times max per month).&lt;/p&gt;

&lt;p&gt;Here is how you set it up and the scripts to use:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Go to &lt;a href=&quot;https://codeship.com&quot;&gt;https://codeship.com&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Sign up for the free tier.&lt;/li&gt;
  &lt;li&gt;Create a new project.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;In the Setup Commands tab, select â€œI want to create my own custom commandsâ€ and use:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;bundle &lt;span class=&quot;nb&quot;&gt;install
&lt;/span&gt;bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;jekyll build &lt;span class=&quot;nt&quot;&gt;--config&lt;/span&gt; _config.yml
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;In the Setup Commands text area, use:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;REMOTE_REPOSITORY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;REMOTE_REPOSITORY&lt;/span&gt;:?&lt;span class=&quot;s1&quot;&gt;'You need to configure the REMOTE_REPOSITORY environment variable!'&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;REMOTE_BRANCH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;REMOTE_BRANCH&lt;/span&gt;:?&lt;span class=&quot;s1&quot;&gt;'You need to configure the REMOTE_BRANCH environment variable!'&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt;
git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; user.email &lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;your email&amp;gt;&quot;&lt;/span&gt;
git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; user.name &lt;span class=&quot;s2&quot;&gt;&quot;&amp;lt;your name&amp;gt; (codeship)&quot;&lt;/span&gt;
git clone &lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;REMOTE_REPOSITORY&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt; _tmp &lt;span class=&quot;nt&quot;&gt;-b&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;REMOTE_BRANCH&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cp&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; _site/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; _tmp/
&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;_tmp
git add &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
git status
git commit &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;new build&quot;&lt;/span&gt;
git push origin master
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;In the Environment tab, create 2 environment variables (to be used in the script above):&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;REMOTE_REPOSITORY&lt;/code&gt;: put the address of the destination repository, the one for the static Github pages, eg. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git@github.com:ldom/ldom.git&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;REMOTE_BRANCH&lt;/code&gt;: put &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;ol&gt;
  &lt;li&gt;The last step is to configure CodeShip and Github to allow the deploy script to push (write) to the destination repository.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;This is described on this page: &lt;a href=&quot;https://documentation.codeship.com/basic/builds-and-configuration/access-to-other-repositories/#sts=The%20Machine%20User%20Solution&quot;&gt;https://documentation.codeship.com/basic/builds-and-configuration/access-to-other-repositories/#sts=The%20Machine%20User%20Solution&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I recommend using the â€œMachine Userâ€ solution. 
It involves:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;creating a new github.com user and&lt;/li&gt;
  &lt;li&gt;give it access to the destination repository (by inviting it as a collaborator in the destination repository),&lt;/li&gt;
  &lt;li&gt;then you have to remove the key from the Deploy section under the destination repository (not your user settings, but the repository settings).&lt;/li&gt;
  &lt;li&gt;At last, you need to put that key (that has to be copied from General tab of the Project Settings in CodeShip) as a new key on the â€œMachine Userâ€ github account. (Note that if you donâ€™t remove it first from the Deploy settings of the destination repository, you wonâ€™t be able to add that key to the â€œMachine Userâ€ keys).&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Once all of this is done, youâ€™ll enjoy a full automated (and free) system where you just have to push to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-src&lt;/code&gt; repository for everything to be built and deployed to Github pages!&lt;/p&gt;
</description>
        <pubDate>Fri, 10 May 2019 00:00:00 +0000</pubDate>
        <link>https://ldom.net/ci-for-github-pages/</link>
        <guid isPermaLink="true">https://ldom.net/ci-for-github-pages/</guid>
        
        
      </item>
    
  </channel>
</rss>



        

      </div><!-- /.content -->


      


      


      <div id="pagination">
  
  
</div><!-- /#pagination -->

    </article>
  </div>
</main><!-- /.row -->

<footer id="footer" class="row">
  <nav id="navigation-footer" class="small-12 columns">
    <ul class="inline-list">
      





  <li class="social-media-icon"><a href="https://twitter.com/ldom" target="_blank" title="Follow me at Twitter"><svg viewBox="0 0 800 800" xmlns="http://www.w3.org/2000/svg">
  <path d="M679 239s-21 34-55 57c7 156-107 329-314 329-103 0-169-50-169-50s81 17 163-45c-83-5-103-77-103-77s23 6 50-2c-93-23-89-110-89-110s23 14 50 14c-84-65-34-148-34-148s76 107 228 116c-22-121 117-177 188-101 37-6 71-27 71-27s-12 41-49 61c30-2 63-17 63-17z"/>
</svg>
</a></li>







  <li class="social-media-icon"><a href="https://www.instagram.com/ldom" target="_blank" title="Follow me at Instagram"><svg viewBox="0 0 800 800" xmlns="http://www.w3.org/2000/svg">
  <path d="M150 400c0-119 0-166 42-208s88-42 208-42 166 0 208 42 42 89 42 208 0 166-42 208-88 42-208 42-166 0-208-42-42-89-42-208zm455 0c0-114 0-148-29-176-29-29-62-29-176-29s-148 0-176 29c-29 29-29 62-29 176s0 148 29 176c29 29 62 29 176 29s148 0 176-29c29-29 29-62 29-176zM400 272a128 128 0 1 1 0 256 128 128 0 0 1 0-256zm0 211c46 0 83-37 83-83s-37-83-83-83-83 37-83 83 37 83 83 83zm163-216c0 16-13 30-30 30-16 0-30-14-30-30 0-17 14-30 30-30 17 0 30 13 30 30z"/>
</svg>
</a></li>






      
        
      <li><a href="https://ldom.net/about/">about</a></li>
      
        
      <li><a href="https://ldom.net/search/">search</a></li>
      
      <li id="up-to-top"><a href="#top-of-page">â€º</a></li>
    </ul>
  </nav>
</footer>




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-159497805-1', 'auto');
  ga('set', 'anonymizeIp', true);
  ga('send', 'pageview');

</script>




</body>
</html>
